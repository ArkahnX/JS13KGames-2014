!function(t,e){function n(t){return Math.sin(6.283184*t)}function r(t){return n(t)<0?-1:1}function o(t){return t%1-.5}function i(t){var e=t%1*4;return 2>e?e-1:3-e}function a(t){return.00390625*Math.pow(1.059463094,t-128)}function l(t,e){setTimeout(function(){var n=new Uint8Array(t*wr*2),r=n.length-2,o=function(){for(var t=new Date,i=0;r>=0;)if(n[r]=0,n[r+1]=128,r-=2,i+=1,i%1e3===0&&new Date-t>vr)return void setTimeout(o,0);setTimeout(function(){e(n)},0)};setTimeout(o,0)},0)}function f(t,e,n,r,o){var i=n.ft*r>>1,a=n.fm/255,l=0,f=function(){for(var n,r,h,u=new Date,d=0;e-i>l;)if(n=4*l,r=4*(l+i),h=t[r]+(t[r+1]<<8)+(t[n+2]+(t[n+3]<<8)-32768)*a,t[r]=255&h,t[r+1]=h>>8&255,h=t[r+2]+(t[r+3]<<8)+(t[n]+(t[n+1]<<8)-32768)*a,t[r+2]=255&h,t[r+3]=h>>8&255,++l,d+=1,d%1e3===0&&new Date-u>vr)return void setTimeout(f,0);setTimeout(o,0)};setTimeout(f,0)}function h(t){return{song:t,waveSize:gr*t.songLen}}function u(t,e){y(t,function(t){d(t,e)})}function d(t,e){var n,r,o,i,a,l,f,h;null===kr&&(kr=new AudioContext),n=t.mixBuf,r=t.waveSize,o=r*wr*2,i=kr.createBuffer(wr,t.waveSize,gr),a=i.getChannelData(0),l=i.getChannelData(1),f=0,h=function(){for(var t,r=new Date,u=0;o/2>f;)if(t=4*(n[4*f]+(n[4*f+1]<<8)-32768),t=-32768>t?-32768:t>32767?32767:t,a[f]=t/32768,t=4*(n[4*f+2]+(n[4*f+3]<<8)-32768),t=-32768>t?-32768:t>32767?32767:t,l[f]=t/32768,f+=1,u+=1,u%1e3===0&&new Date-r>vr)return void setTimeout(h,0);setTimeout(function(){e(i)},0)},setTimeout(h,0)}function s(t){return{mixBuf:t,waveSize:t.length/wr/2}}function y(t,e){l(t.waveSize,function(n){var r=0,o=function(){r<t.song.songData.length?(r+=1,m(t,t.song.songData[r-1],n,o)):e(s(n))};o()})}function c(t,e){return{instr:t,rowLen:e||5605,osc_lfo:br[t.lw],osc1:br[t.ow],osc2:br[t.pw],attack:t.ea,sustain:t.es,release:t.er,panFreq:Math.pow(2,t.fp-8)/e,lfoFreq:Math.pow(2,t.lr-8)/e}}function m(t,e,n,r){l(t.waveSize,function(o){var i=t.waveSize,a=t.waveSize*wr*2,l=t.song.rowLen,h=t.song.endPattern,u=c(e,l),d=0,s=0,y=0,m=function(){for(var t,n,r=new Date;;)if(32!==y){if(s===h-1)return void setTimeout(p,0);if(t=e.p[s],t&&(n=e.c[t-1].n[y],n&&x(u,n,o,d)),d+=l,y+=1,new Date-r>vr)return void setTimeout(m,0)}else y=0,s+=1},p=function(){f(o,i,e,l,w)},g=0,w=function(){for(var t,e=new Date,i=0;a>g;)if(t=n[g]+(n[g+1]<<8)+o[g]+(o[g+1]<<8)-32768,n[g]=255&t,n[g+1]=t>>8&255,g+=2,i+=1,i%1e3===0&&new Date-e>vr)return void setTimeout(w,0);setTimeout(r,0)};setTimeout(m,0)})}function x(t,e,r,o){var i,l,f,h,u,d,s,y,c,m,x=(new Date,0),p=0,g=a(e+12*(t.instr.oo-8)+t.instr.od)*(1+8e-4*t.instr.oe),w=a(e+12*(t.instr.po-8)+t.instr.pd)*(1+8e-4*t.instr.pe),v=t.instr.fr/255,k=0,b=0;for(i=t.attack+t.sustain+t.release-1;i>=0;--i)l=i+o,f=t.osc_lfo(l*t.lfoFreq)*t.instr.la/512+.5,h=1,i<t.attack?h=i/t.attack:i>=t.attack+t.sustain&&(h-=(i-t.attack-t.sustain)/t.release),u=g,t.instr.lf&&(u+=f),t.instr.ox&&(u*=h*h),x+=u,d=t.osc1(x)*t.instr.ov,u=w,t.instr.px&&(u*=h*h),p+=u,d+=t.osc2(p)*t.instr.pv,t.instr.nf&&(d+=(2*Math.random()-1)*t.instr.nf*h),d*=h/255,s=t.instr.fq,t.instr.lq&&(s*=f),s=1.5*Math.sin(3.141592*s/gr),k+=s*b,y=v*(d-b)-k,b+=s*y,c=t.instr.ff,1===c&&(d=y),2===c&&(d=k),3===c&&(d=b),4===c&&(d=k+y),u=n(l*t.panFreq)*t.instr.ft/512+.5,d*=39*t.instr.em,l=4*l,l+3<r.length&&(m=r[l]+(r[l+1]<<8)+d*(1-u),r[l]=255&m,r[l+1]=m>>8&255,m=r[l+2]+(r[l+3]<<8)+d*u,r[l+2]=255&m,r[l+3]=m>>8&255)}function p(){var t,e,n,r,o,i,a,l,f,h,u,d,s,y,c,m;for(ln.strokeStyle=cr.c.bd,ln.lineWidth=2,xe(),an.fillStyle=cr.c.bd,an.fillRect(0,0,nn.width,nn.height),an.fillStyle=cr.c.bg,an.clearRect(0-hr,0-ur,Yn,Xn),t=z(hr)-1,e=z(ur)-1,n=z(hr)+z(en.width)+2,r=z(ur)+z(en.height)+2,0>t&&(t=0),0>e&&(e=0),n>Un&&(n=Un),r>Un&&(r=Un),o={},i=e;r>i;i++)for(a=0,l=16*-Un*2,f=0,an.fillStyle=cr.c.bg,u=t;n>u;u++)1===Zn[H(u,i,Un)]&&(a+=16,l===16*-Un*2&&(l=16*u-hr),h=0>i-1?-1:Zn[H(u,i-1,Un)],0===h&&(f=1)),(1!==Zn[H(u,i,Un)]||u===n-1)&&g(i,l,a,f),(1!==Zn[H(u,i,Un)]||u===n-1)&&(a=0,l=16*-Un*2,f=0);for(i=e;r>i;i++)for(u=t;n>u;u++)Zn[H(u,i,Un)]>1&&(9===Zn[H(u,i,Un)]&&cr.s>-1?(an.fillStyle=pr[cr.s].l,an.strokeStyle=pr[cr.s].bd,d=8,an.beginPath(),an.arc(16*u+8-hr,16*i+8-ur,d,0,2*Math.PI,!1),an.fill(),an.lineWidth=2,an.stroke(),an.closePath()):9!==Zn[H(u,i,Un)]&&10!==Zn[H(u,i,Un)]&&(an.fillStyle=pr[Zn[H(u,i,Un)]-2].l,g(i,16*u-hr,16,!0)));for(u=0;$n/10>u;u++)for(i=0;tr/10>i;i++)s=De(cr,u,i,"N"),y=De(cr,u,i,"E"),c=De(cr,u,i,"S"),m=De(cr,u,i,"W"),s&&D(s,u,i),y&&D(y,u,i),c&&D(c,u,i),m&&D(m,u,i);w(t,e,n,r,1),w(t,e,n,r,4),v(t,e,n,r,2),v(t,e,n,r,8)}function g(t,e,n,r){var o=e,i=16*t-ur;r?an.fillRect(o,i-5,n,21):an.fillRect(o,i,n,16)}function w(t,e,n,r,o){var i,a,l,f,h,u,d,s,y,c,m,x,p,g;for(i=t;n>i;i++)for(a=0,l=16*-Un*2,f=0,h=0,u=e;r>u;u++)d=Zn[H(i+1,u-1,Un)],s=Zn[H(i,u-1,Un)],y=Zn[H(i-1,u-1,Un)],1===o?(h=Zn[H(i-1,u,Un)],0>i-1&&(h=-1)):4===o&&(h=Zn[H(i+1,u,Un)],i+1>Un-1&&(h=-1)),0!==Zn[H(i,u,Un)]&&9!==Zn[H(i,u,Un)]&&1>h&&(a+=16,l===16*-Un*2&&(0===s&&(f=1),l=16*u-ur)),(0===Zn[H(i,u,Un)]||9===Zn[H(i,u,Un)]||u===r-1||h>0)&&(ln.beginPath(),c=l,m=16*i-hr,x=c+a,p=16*(i+1)-hr,g=m,4===o&&(g=p),f&&(c-=5),(4===o&&0===d||1===o&&0===y)&&h>0?k(g,c,g,x+3):k(g,c,g,x),ln.closePath(),ln.stroke()),(0===Zn[H(i,u,Un)]||9===Zn[H(i,u,Un)]||u===r-1||h>0)&&(a=0,l=16*-Un*2,f=0)}function v(t,e,n,r,o){var i,a,l,f,h,u,d,s,y,c;for(i=e;r>i;i++)for(a=0,l=16*-Un*2,f=0,h=0,u=t;n>u;u++)2===o?0>i-1?h=-1:(h=Zn[H(u,i-1,Un)],f=1):8===o&&(h=Zn[H(u,i+1,Un)],i+1>Un-1&&(h=-1)),0!==Zn[H(u,i,Un)]&&9!==Zn[H(u,i,Un)]&&1>h&&(a+=16,l===16*-Un*2&&(l=16*u-hr)),(0===Zn[H(u,i,Un)]||9===Zn[H(u,i,Un)]||u===n-1||h>0)&&(ln.beginPath(),d=l,s=16*i-ur,y=d+a,c=16*(i+1)-ur,2===o?1===f?(k(d,s-5,y,s-5),k(d,s+3,y,s+3)):k(d,s,y,s):8===o&&k(d,c,y,c),ln.closePath(),ln.stroke()),(0===Zn[H(u,i,Un)]||9===Zn[H(u,i,Un)]||u===n-1||h>0)&&(a=0,l=16*-Un*2,f=0)}function k(t,e,n,r){ln.moveTo(t,e),ln.lineTo(n,r)}function b(){var t,e,n,r,o;for(hn.width=Sr,hn.height=Sr,pe(),Ke=16*cr.x+16*z(z(z(vn.x),10),1),Qe=16*cr.y+16*z(z(z(vn.y),10),1),fn.clearRect(0,0,hn.width,hn.height),Ve.length=0,fn.lineWidth=2,fn.fillStyle="#000",t=0;t<yr.r.length;t++)for(e=0;e<yr.r[t].rooms.length;e++)n=yr.r[t].rooms[e],r=16*n.x-dr,o=16*n.y-sr,r+16*n.mw>0&&o+16*n.mh>0&&r<hn.width&&o<hn.height&&(fn.beginPath(),fn.rect(r,o,16*n.mw,16*n.mh),fn.fill(),fn.closePath());S("bg","bd",function(t,e,n){t.v&&(fn.beginPath(),fn.rect(e,n,16*t.mw,16*t.mh),fn.fill(),fn.stroke(),fn.closePath())},fn),S("bd",0,function(t,e,n){t.r.u&&!t.v&&(fn.beginPath(),fn.rect(e,n,16*t.mw,16*t.mh),fn.fill(),fn.stroke(),fn.closePath())},fn),Je.clearRect(0,0,16,16),S("bg","bd",function(t,e,n){t.v&&(Je.beginPath(),Je.rect(e/16*2,n/16*2,2*t.mw,2*t.mh),Je.fill(),Je.stroke(),Je.closePath())},Je),Mr.href=Tr.toDataURL(),S(0,"bg",P,fn),S(0,0,M,fn),j()}function S(t,e,n,r){var o,i,a,l,f,h=r||fn;for(o=0;o<yr.r.length;o++)for(h.fillStyle="string"==typeof t?yr.r[o].color[t]:"rgba(0,0,0,0)",h.strokeStyle="string"==typeof e?yr.r[o].color[e]:"rgba(0,0,0,0)",i=0;i<yr.r[o].rooms.length;i++)a=yr.r[o].rooms[i],l=16*a.x-dr,f=16*a.y-sr,l+16*a.mw>0&&f+16*a.mh>0&&l<hn.width&&f<hn.height&&n(a,l,f,h)}function M(t){var e,n,r,o,i,a;if(t.v){for(e=null,n=null,r=null,o=0;o<t.d.length;o++)e=t.d[o],e.dt>-1&&(n=pr[e.dt].l,r=pr[e.dt].bd,i=0,a=0,"N"===e.dir&&(i=5),"S"===e.dir&&(i=5,a=16),"W"===e.dir&&(i=-3,a=8),"E"===e.dir&&(i=13,a=8),T(16*e.x+i,16*e.y+a,n,r));t.s>-1&&(n=pr[t.s].l,r=pr[t.s].bd,T(16*(t.x+t.mw/2)-3,16*(t.y+t.mh/2),r,n))}}function T(t,e,n,r){var o=3;fn.beginPath(),fn.arc(t+o-dr,e-sr,o,0,2*Math.PI,!1),fn.fillStyle=n,fn.fill(),r&&(fn.lineWidth=2,fn.strokeStyle=r,fn.stroke()),fn.closePath()}function P(t){var e,n,r,o,i,a;if(t.v)for(e=null,n=0;n<t.d.length;n++)e=t.d[n],r=t.x+"-"+t.y+"-"+e.r2.x+"-"+e.r2.y,o=e.r2.x+"-"+e.r2.y+"-"+t.x+"-"+t.y,-1===Ve.indexOf(o)&&-1===Ve.indexOf(r)&&(i=16*e.x,a=16*e.y,"N"===e.dir&&F(i+4,a,i+16-4,a),"S"===e.dir&&F(i+4,16*(e.y+1),i+16-4,16*(e.y+1)),"W"===e.dir&&F(i,a+4,i,a+16-4),"E"===e.dir&&F(16*(e.x+1),a+4,16*(e.x+1),a+16-4),Ve.push(r))}function F(t,e,n,r){fn.beginPath(),fn.moveTo(t-dr,e-sr),fn.lineTo(n-dr,r-sr),fn.stroke(),fn.closePath()}function C(){for(var t=0;t<vn.keys.length;t++)on.beginPath(),on.fillStyle=pr[vn.keys[t]].l,on.rect(vn.x-hr,vn.y-ur+(4-t)*vn.h/5,vn.w,vn.h/5),on.fill(),on.closePath()}function j(){var t,e,n,r;for(on.fillStyle="#000000",t=0;t<bn.length;t++)e=bn[t],n=(15-15*(vn.ῼ/vn.mῼ)).toString(16),on.beginPath(),on.fillStyle="rgba(0,0,0,0.1)",on.rect(e.x-hr,e.y-ur,e.w,e.h),on.fill(),on.closePath(),C(),on.beginPath(),on.lineWidth=1,on.strokeStyle="#"+n+n+"0000",on.fillStyle="rgba(0,0,0,0)",on.rect(e.x-hr,e.y-ur,e.w,e.h),on.stroke(),on.closePath();Ze+=2*(kn/1e3),Ze%=2,r=1,Ze>1&&(r=0),tn!==r&&(un.fillStyle="rgba(255,255,0,"+.6*r+")",un.strokeStyle="rgba(255,255,0,"+.8*r+")"),dn.width!==hn.width&&(dn.width=hn.width,dn.height=hn.height,un.fillStyle="rgba(255,255,0,"+.6*r+")",un.strokeStyle="rgba(255,255,0,"+.8*r+")"),$e||(un.lineWidth=1,$e=!0),un.clearRect(0,0,dn.width,dn.height),un.beginPath(),un.rect(Ke-dr,Qe-sr,16,16),un.fill(),un.stroke(),un.closePath(),Je.beginPath(),Je.fillStyle="rgba(200,200,255,1)",Je.strokeStyle="rgba(200,200,255,1)",Je.rect((Ke-dr)/16*2,(Qe-sr)/16*2,2,2),Je.fill(),Je.stroke(),Je.closePath(),tn=r}function E(){vn.keys.length>0&&(on.fillStyle=pr[vn.keys[Bn]].l,on.strokeStyle="#000000",on.save(),on.translate(vn.x-hr+vn.w/2,vn.y-ur+vn.h/2),on.rotate(Pn),on.beginPath(),on.moveTo(10+vn.w,0),on.lineTo(0+vn.w,-10),on.lineTo(0+vn.w,10),on.lineTo(10+vn.w,0),on.fill(),on.stroke(),on.closePath(),on.restore())}function W(){var t,e;for(t=0;t<Fn.length;t++)e=Fn[t],on.fillStyle=pr[e.key].l,on.strokeStyle=pr[e.key].bd,on.lineWidth=1,on.save(),on.translate(e.x-hr,e.y-ur),on.rotate(e.a),on.beginPath(),on.rect(0,0,10,2),on.fill(),on.stroke(),on.closePath(),on.restore()}function D(t,e,n){var r,o,i;an.fillStyle=-1===t.dt?"#000000":pr[t.dt].l,an.strokeStyle="#FFFFFF",an.save(),r=0,o=160,i=80,"N"===t.dir&&(r=90,i=0,o=80),"W"===t.dir&&(r=180,o=0,i=80),"S"===t.dir&&(r=270,o=80,i=160),an.translate(16*e*10-hr+o,16*n*10-ur+i),an.beginPath(),"N"===t.dir&&(an.moveTo(0,-20),an.lineTo(10,-10),an.lineTo(-10,-10),an.lineTo(0,-20)),"W"===t.dir&&(an.moveTo(-20,0),an.lineTo(-10,-10),an.lineTo(-10,10),an.lineTo(-20,0)),"S"===t.dir&&(an.moveTo(0,20),an.lineTo(10,10),an.lineTo(-10,10),an.lineTo(0,20)),"E"===t.dir&&(an.moveTo(20,0),an.lineTo(10,-10),an.lineTo(10,10),an.lineTo(20,0)),an.fill(),an.stroke(),an.closePath(),an.restore()}function A(t,e){gn[t]||(gn[t]=[]),gn[t].push(e)}function L(t){var e,n=t.type;if(gn[n]&&gn[n].length>0)for(e=0;e<gn[n].length;e++)gn[n][e](t)}function B(t){return e.getElementById(t)}function O(){var t,e,n,r,o,i,a,l;for(sn=B("clr"),en=B("p"),rn=B("b"),nn=B("t"),hn=B("m"),dn=B("i"),on=en.getContext("2d"),ln=rn.getContext("2d"),an=nn.getContext("2d"),fn=hn.getContext("2d"),un=dn.getContext("2d"),I(),Ye(),t=null,e=0;e<pr.length;e++){for(n=q(5,10),r=0;n>r;r++)Le();e+1<pr.length&&(t=yr.r[yr.r.length-1],we(_e(),t))}for(we(_e(),yr.r[0]),n=q(5,10),r=0;n>r;r++)Le();o=yr.r[0].rooms[0],i=o.d[0],a=i.dir,l=i.x,o.sr=!0,o.sx=l-o.x,o.sy=i.y-o.y,("E"===i.dir||"W"===i.dir)&&(l=i.y),qe(),ze(),me(o,a,l),N()}function I(){rn.width=en.width=nn.width=t.innerWidth>300?300:t.innerWidth,rn.height=en.height=nn.height=t.innerHeight>300?300:t.innerHeight}function R(){var t,e;if(yn){for(t=0;t<bn.length;t++)e=bn[t],ee(e),e.x=X(e.x),e.y=X(e.y),ie(e),oe(e),ne(e),ye(),re(e);for(Q(),Z(),t=0;t<Fn.length;t++)le(Fn[t]);on.clearRect(0,0,en.width,en.height),ln.clearRect(0,0,rn.width,rn.height),p(),b(),E(),W()}}function N(){xn=t.performance.now(),kn=xn-pn,pn=xn,e.dispatchEvent(mn),cn&&requestAnimationFrame(N)}function q(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function z(t,e){var n=t%(e||16);return(t-n)/(e||16)}function H(t,e,n){return e*n+t}function U(t,e){var n,r,o;if("object"==typeof e){for(n=0;n<t.length;n++)if(r=!0,"object"==typeof t[n]){for(o in e)if(t[n][o]!==e[o]){r=!1;break}if(r===!0)return n}return-1}return t.indexOf(e)}function X(t){return~~(.5+t)}function Y(e){for(var n in Sn)Sn[n]===e.keyCode&&e.preventDefault();wn[e.keyCode]!==e.type&&(e.keyCode===Sn.space&&(vn.j=1),e.keyCode===Sn.tab&&(Sr=Math.min(16*z(t.innerHeight),16*z(t.innerWidth)))),wn[e.keyCode]=e.type,e.keyCode===Sn.d?vn.xd=1:e.keyCode===Sn.a&&(vn.xd=-1)}function _(t){for(var e in Sn)Sn[e]===t.keyCode&&t.preventDefault();wn[t.keyCode]!==t.type&&t.keyCode===Sn.space&&(vn.j=0),wn[t.keyCode]=t.type,t.keyCode===Sn.tab&&(Sr=150),(t.keyCode===Sn.d||t.keyCode===Sn.a)&&(wn[Sn.d]&&wn[Sn.a]?wn[Sn.d]===t.type&&wn[Sn.a]===t.type&&(vn.xd=0):vn.xd=0)}function G(t){var e=en.getBoundingClientRect();An=t.clientX-e.left,Ln=t.clientY-e.top,Mn=t.clientX,Tn=t.clientY,Pn=Math.atan2(vn.y+vn.h/2-ur-Ln,vn.x+vn.w/2-hr-An)+Math.PI}function J(t){t.preventDefault(),1===t.which&&(jn=!0),2===t.which&&(Bn++,Bn>vn.keys.length-1&&(Bn=0)),3===t.which&&(En=!0)}function K(t){t.preventDefault(),1===t.which&&(jn=!1),3===t.which&&(En=!1)}function Q(){jn&&t.performance.now()-Cn>Wn&&vn.keys.length>0&&(Cn=t.performance.now(),Fn.push($(vn.x+vn.w/2+10*Math.cos(Pn),vn.y+vn.h/2+10*Math.sin(Pn),Pn,vn.keys[Bn])))}function V(t){t.preventDefault()}function Z(){var t,e,n;En&&(t=An+hr,e=Ln+ur,t>=0&&16*$n>t&&e>=0&&16*tr>e&&(n=H(z(t),z(e),Un),0===Zn[n]&&Dn[vn.keys[Bn]]>0&&(Zn[n]=vn.keys[Bn]+2,Dn[vn.keys[Bn]]--)))}function $(t,e,n,r){return{x:t,y:e,a:n,key:r}}function te(){qn?(Rn.stop(),zn+=kr.currentTime-Hn):(Hn=kr.currentTime,Rn=kr.createBufferSource(),Rn.buffer=Nn,Rn.loop=!0,Rn.connect(kr.destination),Rn.start(0,zn%Nn.duration)),qn=!qn}function ee(t){t.xa=t.xa+t.xd/60*kn,t.xa>t.maxa&&(t.xa=t.maxa),t.xa<-t.maxa&&(t.xa=-t.maxa),0===t.xd&&(t.xa>0?t.xa=t.xa+-2/60*kn:t.xa<0&&(t.xa=t.xa+2/60*kn),(t.xa<1/60*kn&&t.xa>-1/60*kn||1===t.yd||-1===t.yd)&&(t.xa=0)),t.x=t.x+t.xa}function ne(t){t.j&&-1!==t.yd&&t.ju<t.mj&&(t.mj>1&&0===t.ju&&1===t.yd&&t.ju++,(0===t.ju&&0===t.yd||t.ju>0||t.mj>1)&&(t.yd=-1,t.ya=-t.jf,t.js=t.y,t.ju++),t.ht=0),(0===t.yd||!t.j||t.ht>t.jh)&&(t.yd=1),1===t.yd&&(t.j=0,t.ya=t.ya+t.jf/2/60*kn),0===t.yd&&(t.ya>0?t.ya=t.ya+-1/60*kn:t.ya<0&&(t.ya=t.ya+1/60*kn),t.ya<1/60*kn&&t.ya>-1/60*kn&&(t.ya=0)),t.ya>t.maxa&&(t.ya=10),t.ht-=t.ya,t.ht=X(t.ht),t.y=t.y+t.ya}function re(t){var e=t.x%16,n=H(z(t.x),z(t.y+t.h),Un),r=H(z(t.x+t.w),z(t.y+t.h),Un),o=!1;o=0===e?ae(Zn[n]):ae(Zn[r])||ae(Zn[n]),(o||t.y+t.h>16*tr)&&1===t.yd&&(t.y=16*z(t.y),t.ya=0,t.yd=0,t.ju=0,t.j=0,t.ht=0)}function oe(t){var e=t.x%16,n=H(z(t.x),z(t.y-t.h/2),Un),r=H(z(t.x+t.w),z(t.y-t.h/2),Un),o=!1;o=0===e?ae(Zn[n]):ae(Zn[n])||ae(Zn[r]),o&&1===t.j&&(t.y=16*z(t.y),t.ya=-1,t.yd=1,t.j=0,t.ht=0)}function ie(t){var e=t.y%16,n=t.x%16,r=H(z(t.x),z(t.y-t.h/2),Un),o=H(z(t.x+t.w),z(t.y-t.h/2),Un),i=H(z(t.x),z(t.y),Un),a=H(z(t.x+t.w),z(t.y),Un),l=H(z(t.x),z(t.y+t.h/2),Un),f=H(z(t.x+t.w),z(t.y+t.h/2),Un),h=H(z(t.x),z(t.y+t.h),Un),u=H(z(t.x+t.w),z(t.y+t.h),Un),d=!1,s=!1;0===e?(d=ae(Zn[l])||ae(Zn[i]),s=ae(Zn[f])||ae(Zn[a])):16*z(t.y+t.h)>t.y+t.h?(d=ae(Zn[l])||ae(Zn[i])||ae(Zn[r]),s=ae(Zn[f])||ae(Zn[a])||ae(Zn[o])):(d=ae(Zn[l])||ae(Zn[i])||ae(Zn[h]),s=ae(Zn[f])||ae(Zn[a])||ae(Zn[u])),0===n?(s||t.x+t.w>16*$n||t.x<0)&&t.xa>0&&(t.x=16*z(t.x),t.xa=0):(s||t.x+t.w>16*$n||t.x<0)&&t.xa>0?(t.x=16*z(t.x),t.xa=0):(d||t.x+t.w>16*$n||t.x<0)&&t.xa<0&&(t.x=16*z(t.x+t.w),t.xa=0)}function ae(t){return 9===t&&He(cr),0!==t}function le(t){var e,n,r,o,i=!1;t.x+=Math.cos(t.a)*(10/60)*kn,t.y+=Math.sin(t.a)*(10/60)*kn,e=z(t.x),n=z(t.y),r=H(e,n,Un),0!==Zn[r]&&(Zn[r]>1&&vn.keys[Bn]===Zn[r]-2&&(Dn[Zn[r]-2]++,Zn[r]=0),i=!0),(t.x>16*$n||t.x<0||t.y>16*tr||t.y<0)&&(i=!0),i&&(o=Fn.indexOf(t),o>-1&&Fn.splice(o,1))}function fe(t,e){e=e.split("");for(var n=0;n<e.length;n++)e[n]=parseInt(e[n]);return{map:e,type:t}}function he(t){return{map:t.map.slice(0),type:t.type}}function ue(t,e,n,r){function o(t,e){return t>-1&&2>t&&e>-1&&2>e?!0:t>7&&10>t&&e>-1&&2>e?!0:t>-1&&2>t&&e>7&&10>e?!0:t>7&&10>t&&e>7&&10>e?!0:void 0}var i,a,l,f,h,u,d,s,y,c,m,x,p,g,w,v,k,b,S,M,T,P,F,C=[],j=[],E=Math.max(t,e);for(i=0;E*E>i;i++)C[i]=0;for(C=r(C,t,e,E),l={},s=0;10*E>s;s++)for(y=0;10*E>y;y++)c=Math.floor(y/10),m=Math.floor(s/10),f=De(n,c,m,"N"),h=De(n,c,m,"E"),u=De(n,c,m,"S"),d=De(n,c,m,"W"),x=H(c,m,E),p=c+"-"+m,(y%10===0||s%10===0)&&(l[p]||(a=he(Jn[C[x]]),l[p]=a),a=l[p]),g=H(y,s,10*E),w=H(y%10,s%10,10),v=H(y-1,s,10*E),k=H(y+1,s,10*E),b=H(y,s-1,10*E),S=H(y,s-2,10*E),0>s-1&&(b=-1),0>y-1&&(v=-1),s+1>10*e-1&&(belowMap=-1),y+1>10*t-1&&(k=-1),j[g]=n.r.u&&0===n.r.id&&0!==a.map[w]&&10*t>y&&10*e>s&&10*t>y&&10*e>s?1===q(0,5)?q(0,pr.length-1)+2:0:a.map[w],n.r.u&&0===j[g]&&9!==a.type&&10*t>y&&10*e>s&&10*t>y&&10*e>s&&((1===n.r.id||2===n.r.id||3===n.r.id)&&(j[g]=n.r.id+2),q(0,6)<2&&2===n.r.id&&(j[g]=0),q(0,6)<4&&3===n.r.id&&(j[g]=0),1===q(0,3)&&4===n.r.id&&(j[g]=n.r.id+2),1===q(0,3)&&0===n.r.id&&(j[g]=n.r.id+2)),n.r.u&&(3===n.r.id||4===n.r.id||0===n.r.id)&&1===j[g]&&9!==a.type&&10*t>y&&10*e>s&&10*t>y&&10*e>s&&(1===q(0,3)?j[g]=n.r.id+2:2===q(0,3)&&(j[g]=0)),M=10*e,T=10*t,P=y%10,F=s%10,0===s&&null===f&&T>y&&(j[g]=1),0===y&&null===d&&M>s&&(j[g]=1),s===M-1&&null===u&&T>y&&(j[g]=1),y===T-1&&null===h&&M>s&&(j[g]=1),o(P,F)&&(j[g]=1),0===j[g]&&(0===s&&null!==f&&T>y&&f.dt>-1&&(j[g]=f.dt+2),0===y&&null!==d&&M>s&&d.dt>-1&&(j[g]=d.dt+2),s===M-1&&null!==u&&T>y&&u.dt>-1&&(j[g]=u.dt+2),y===T-1&&null!==h&&M>s&&h.dt>-1&&(j[g]=h.dt+2));return{map:j,width:t,height:e,size:E,tiles:10*E}}function de(t){var e,n,r,o,i,a,l,f,h,u,d,s;if(t.map=ue(1*t.mw,1*t.mh,t,function(e,n,r,o){var i,a,l,f,h,u,d,s=0,y=0,c=0;for(i=0;o*o>i;i++)a=De(t,s,y,"N"),l=De(t,s,y,"E"),f=De(t,s,y,"S"),h=De(t,s,y,"W"),u=[1,3,4,9],d=[2,9,10,11],(0===s||0===y||s===n-1||y===r-1)&&(c=q(0,11)),(0===s||s===n-1)&&(c=d[q(0,3)]),(0===y||y===r-1)&&(c=u[q(0,3)]),(0===s&&0===y||s===n-1&&0===y||s===n-1&&y===r-1||0===s&&y===r-1)&&(c=9),1===t.mw&&(c=d[q(0,3)]),1===t.mh&&(c=u[q(0,3)]),0===s&&0===y&&(c=6),s===n-1&&0===y&&(c=7),0===s&&y===r-1&&(c=5),s===n-1&&y===r-1&&(c=8),(a||f||l||h)&&(c=9),e[H(s,y,o)]=c,s++,s>n-1&&(s=0,y++),y>r-1&&(i=o*o);return e}),t.s>-1&&-1===vn.keys.indexOf(t.s)){for(e=0,n=!1;n===!1&&5>e;)t.sr?(r=1*t.sx,o=1*t.sy,i=q(1,9),a=q(1,9)):(r=q(1,1*t.mw)-1,o=q(1,1*t.mh)-1,i=q(1,9),a=q(1,9)),l=H(10*r+i,10*o+a,t.map.tiles),f=0===t.map.map[l]||t.map.map[l]===t.r.id+2,f&&(n=!0,t.map.map[H(10*r+i,10*o+a,t.map.tiles)]=9),e++;if(!n)if(t.sr)for(h=1*t.sx*10,u=1*t.sy*10,d=h+1;h+10-1>d;d++)for(s=u+1;u+10-1>s;s++)l=H(d,s,t.map.tiles),f=0===t.map.map[l]||t.map.map[l]===t.r.id+2,f&&(t.map.map[l]=9);else for(h=1*t.sx*10,u=1*t.sy*10,d=1;d<1*t.mw*10-1;d++)for(s=1;s<1*t.mh*10-1;s++)l=H(d,s,t.map.tiles),f=0===t.map.map[l]||t.map.map[l]===t.r.id+2,f&&(t.map.map[l]=9)}}function se(t,e,n){var r,o,i,a,l;for(r=0;r<t.d.length;r++)o=!1,i=t.d[r],i.dir===e&&(("N"===i.dir||"S"===i.dir)&&(o=n===i.x),("E"===i.dir||"W"===i.dir)&&(o=n===i.y),o&&(a=1*(i.x-t.x),l=1*(i.y-t.y),-1===vn.y&&(vn.y=10*l*16+80),-1===vn.x&&(vn.x=10*a*16+80),"N"===i.dir&&(a+=Math.floor(.5),vn.y=0,i.dt>-1&&(vn.y=16),vn.x=vn.x%160+10*a*16),"E"===i.dir&&(l+=Math.floor(.5),a+=1,vn.x=10*t.mw*16*1-vn.w,i.dt>-1&&(vn.x-=16),vn.y=vn.y%160+10*l*16),"S"===i.dir&&(a+=Math.floor(.5),l+=1,vn.y=10*t.mh*16*1-vn.h,i.dt>-1&&(vn.y-=16),vn.x=vn.x%160+10*a*16),"W"===i.dir&&(l+=Math.floor(.5),vn.x=0,i.dt>-1&&(vn.x=16),vn.y=vn.y%160+10*l*16)))}function ye(){var e,n,r,o,i,a,l,f,h,u;for(e=0;e<cr.d.length;e++)n=cr.d[e],r=1*(n.x-cr.x),o=1*(n.y-cr.y),i=z(z(vn.x),10),a=z(z(vn.x+vn.w),10),l=z(z(vn.y),10),f=z(z(vn.y+vn.h),10),h=10*cr.mw*16*1,u=10*cr.mh*16*1,"N"===n.dir&&(r+=Math.floor(.5)),"E"===n.dir&&(o+=Math.floor(.5),r+=1),"S"===n.dir&&(r+=Math.floor(.5),o+=1),"W"===n.dir&&(o+=Math.floor(.5)),t.performance.now()-vn.dc>400&&(vn.x<=0&&-1===vn.xd&&"W"===n.dir&&r===i&&o===l&&me(n.r2,"E",n.y),vn.y<=0&&-1===vn.yd&&"N"===n.dir&&r===i&&o===l&&me(n.r2,"S",n.x),vn.x+vn.w>=h&&1===vn.xd&&"E"===n.dir&&r===a&&o===l&&me(n.r2,"W",n.y),vn.y+vn.h>=u&&0!==vn.yd&&Math.abs(vn.ya)>5&&"S"===n.dir&&r===i&&(o===f||o===l)&&me(n.r2,"N",n.x))}function ce(){var n,r,o,i,a,l;or&&(null===cr&&(lr=fr),n=en.width,r=en.height,o=n,i=r,fr>lr&&(o=n*lr/fr,o=n-o,i=r*lr/fr,i=r-i),lr>=fr&&(cr!==rr&&(ln.clearRect(0,0,n,r),an.clearRect(0,0,n,r),cr=rr,cr.v=!0,Un=rr.map.tiles,Zn=rr.map.map,tr=10*rr.map.height,$n=10*rr.map.width,Xn=10*rr.map.height*16,Yn=10*rr.map.width*16,se(rr,er,nr),e.title=cr.c.name,history.pushState(null,null,"#"+e.title),Fn.length=0),o=n*(lr-fr)/fr,i=r*(lr-fr)/fr),ir.width=n,ir.height=r,ar.clearRect(0,0,n,r),b(),p(),ar.drawImage(nn,0,0),ar.drawImage(rn,0,0),ar.drawImage(en,0,0),on.clearRect(0,0,n,r),rn.style.display="none",nn.style.display="none",ar.globalCompositeOperation="destination-in",a=vn.x+vn.w/2-hr-o/2,l=vn.y+vn.h/2-ur-i/2,ar.beginPath(),ar.rect(a,l,o,i),ar.fillStyle="black",ar.fill(),on.drawImage(ir,0,0),lr+=2*fr*(kn/1e3),lr>2*fr&&(lr=0,yn=!0,rr=null,or=!1,rn.style.display="initial",nn.style.display="initial",vn.dc=t.performance.now()))}function me(t,e,n){er=e,nr=n,or=!0,rr=t,yn=!1,null===t.map&&de(t)}function xe(){var t=an.canvas,e=t.width/2,n=t.height/2;vn.x-hr+e>t.width?hr=vn.x-(t.width-e):vn.x-e<hr&&(hr=vn.x-e),vn.y-ur+n>t.height?ur=vn.y-(t.height-n):vn.y-n<ur&&(ur=vn.y-n),ur=~~(.5+ur),ur=~~(.5+ur)}function pe(){var t=fn.canvas,e=t.width/2,n=t.height/2,r=16*(cr.x+z(z(z(vn.x),10),1)),o=16*(cr.y+z(z(z(vn.y),10),1));r-dr+e>t.width?dr=r-(t.width-e):dr>r-e&&(dr=r-e),o-sr+n>t.height?sr=o-(t.height-n):sr>o-n&&(sr=o-n),sr=~~(.5+sr),sr=~~(.5+sr)}function ge(t,e,n){yr.f.length=0,yr.f.push({x:t,y:e}),yr.cr=n,yr.r.push(n)}function we(t,e){for(var n,r,o=!0,i=ke(e),a=[],l=null,f=[];o;){if(n=0,l=ve(i,f),a.length=0,l)for(a.push(We(l.x-1,l.y),We(l.x+1,l.y),We(l.x,l.y-1),We(l.x,l.y+1)),r=0;4>r;r++)null===a[r]&&n++;else o=!1;n>2&&(o=!1)}l&&ge(l.x,l.y,t)}function ve(t,e){if(e.length===t.length)return!1;for(var n=q(0,t.length-1);e.indexOf(n)>-1;)n=q(0,t.length-1);return e.push(n),t[n]}function ke(t){var e,n=[],r=yr.rooms;for(t&&(r=t.rooms),e=0;e<r.length;e++)n=be(n,r[e]);return n}function be(t,e){for(var n,r=e.x;r<e.x+e.mw;)Se(r,e.y-1,1,1)&&t.push({x:r,y:e.y-1}),Se(r,e.y+e.mh,1,1)&&t.push({x:r,y:e.y+e.mh}),r++;for(n=e.x;n<e.y+e.mh;)Se(n,e.x-1,1,1)&&t.push({x:n,y:e.x-1}),Se(n,e.x+e.mw,1,1)&&t.push({x:n,y:e.x+e.mw}),n++;return t}function Se(t,e,n,r){return Me(t,e,n,r)&&!Te(t,e,n,r)}function Me(t,e,n,r){return t>0&&e>0&&t+n<yr.width&&e+r<yr.height}function Te(t,e,n,r){for(var o=null,i=0;i<yr.rooms.length;){o=yr.rooms[i];{if(!(o.x>t+n-1||o.x+o.mw-1<t||o.y>e+r-1||o.y+o.mh-1<e))return!0;i++}}return!1}function Pe(t){for(var e,n,r,o=0,i=null,a=!1,l=100;yr.rooms.length>1&&!a;){for(o=0,o+=Fe(t),o+=Ce(t),o+=je(t),o+=Ee(t),1===t.r.rooms.length&&o>0&&(a=!0),e=0;e<t.d.length;e++)i=t.d[e],Xe(i,t).r===t.r&&(a=!0);l--,0===l&&(a=!0)}for(e=0;e<t.d.length;e++)n=t.r,r=Xe(i,t).r,n!==r&&(-1===n.bds.indexOf(r)&&n.bds.push(r),-1===r.bds.indexOf(n)&&r.bds.push(n))}function Fe(t){for(var e,n,r,o,i=null,a=null,l=null,f=null,h=[],u=t.x;u<t.x+t.mw;)a=We(u,t.y-1),null!==a&&h.push({x:u,y:t.y,o:a}),u++;for(e=0,n=0;n<h.length;n++){for(i=h[n],r=!1,o=0;o<t.d.length;o++)t.d[o].r2===i.o&&(r=!0);Math.random()>mr||U(t.d,i)>=0||r||(l=Ne(i.x,i.y,"N",t,i.o),f=Ne(i.x,i.y-1,"S",i.o,t),t.d.push(l),l.o=f,f.o=l,i.o.d.push(f),e++)}return e}function Ce(t){for(var e,n,r,o,i=null,a=null,l=null,f=null,h=[],u=t.x;u<t.x+t.mw;)a=We(u,t.y+t.mh),null!==a&&h.push({x:u,y:t.y+t.mh-1,o:a}),u++;for(e=0,n=0;n<h.length;n++){for(i=h[n],r=!1,o=0;o<t.d.length;o++)t.d[o].r2===i.o&&(r=!0);Math.random()>mr||U(t.d,i)>=0||r||(l=Ne(i.x,i.y,"S",t,i.o),f=Ne(i.x,i.y+1,"N",i.o,t),t.d.push(l),l.o=f,f.o=l,i.o.d.push(f),e++)}return e}function je(t){for(var e,n,r,o,i=null,a=null,l=null,f=null,h=[],u=t.y;u<t.y+t.mh;)a=We(t.x-1,u),null!==a&&h.push({x:t.x,y:u,o:a}),u++;for(e=0,n=0;n<h.length;n++){for(i=h[n],r=!1,o=0;o<t.d.length;o++)t.d[o].r2===i.o&&(r=!0);Math.random()>mr||U(t.d,i)>=0||r||(l=Ne(i.x,i.y,"W",t,i.o),f=Ne(i.x-1,i.y,"E",i.o,t),t.d.push(l),l.o=f,f.o=l,i.o.d.push(f),e++)}return e}function Ee(t){for(var e,n,r,o,i=null,a=null,l=null,f=null,h=[],u=t.y;u<t.y+t.mh;)a=We(t.x+t.mw,u),null!==a&&h.push({x:t.x+t.mw-1,y:u,o:a}),u++;for(e=0,n=0;n<h.length;n++){for(i=h[n],r=!1,o=0;o<t.d.length;o++)t.d[o].r2===i.o&&(r=!0);Math.random()>mr||U(t.d,i)>=0||r||(l=Ne(i.x,i.y,"E",t,i.o),f=Ne(i.x+1,i.y,"W",i.o,t),l.o=f,f.o=l,t.d.push(l),i.o.d.push(f),e++)}return e}function We(t,e){for(var n=null,r=0;r<yr.rooms.length;){n=yr.rooms[r];{if(!(n.x>t||n.x+n.mw-1<t||n.y>e||n.y+n.mh-1<e))return n;r++}}return null}function De(t,e,n,r){var o,i=null;for(o=0;o<t.d.length;o++)if(i=t.d[o],i.dir===r&&i.x===t.x+e&&i.y===t.y+n)return i;return null}function Ae(t){for(var e=0,n=yr.rooms.length;e++<10*t&&yr.rooms.length<n+t;)Le()}function Le(){var t=[],e=ve(yr.f,t);e&&Be(Ie(e.x,e.y))}function Be(t){if(null===t||!Se(t.x,t.y,t.mw,t.mh))return!1;var e=[];e=Oe(e,t),yr.f=be(e,t),t.c=yr.cr.color,yr.rooms.push(t),yr.cr.rooms.push(t),Pe(t)}function be(t,e){for(var n,r=e.x;r<e.x+e.mw;)Se(r,e.y-1,1,1)&&t.push({x:r,y:e.y-1}),Se(r,e.y+e.mh,1,1)&&t.push({x:r,y:e.y+e.mh}),r++;for(n=e.y;n<e.y+e.mh;)Se(e.x-1,n,1,1)&&t.push({x:e.x-1,y:n}),Se(e.x+e.mw,n,1,1)&&t.push({x:e.x+e.mw,y:n}),n++;return t}function Oe(t,e){for(var n=0;n<yr.f.length;n++)yr.f[n].x>=e.x-1&&yr.f[n].x<=e.x+e.mw&&yr.f[n].y>=e.y&&yr.f[n].y<=e.y+e.mh-1||yr.f[n].x>=e.x&&yr.f[n].x<=e.x+e.mw-1&&yr.f[n].y>=e.y-1&&yr.f[n].y<=e.y+e.mh||t.push(yr.f[n]);return t}function Ie(t,e){for(var n,r=0,o=1,i=1;r++<25&&(o<yr.cr.maxW||i<yr.cr.maxH)&&Math.random()<.9;)n=parseInt(4*Math.random()),0===n&&i<yr.cr.maxH&&Se(t,e-1,o,i+1)&&(e--,i++),1===n&&i<yr.cr.maxH&&Se(t,e,o,i+1)&&i++,2===n&&o<yr.cr.maxW&&Se(t-1,e,o+1,i)&&(t--,o++),3===n&&o<yr.cr.maxW&&Se(t,e,o+1,i)&&o++;return Re(t,e,o,i,yr.cr)}function Re(t,e,n,r,o){return{x:t,y:e,mw:n,mh:r,c:null,r:o,s:-1,sx:0,sy:0,sr:!1,v:!1,d:[],map:null}}function Ne(t,e,n,r,o){return{x:t,y:e,dt:-1,dir:n,r1:r,r2:o,o:null}}function qe(){var t,e,n=null,r=null;for(t=0;t<yr.rooms.length;t++)for(n=yr.rooms[t],n.s=-1,e=0;e<n.d.length;e++)r=n.d[e],r.dt=-1}function ze(){var t,e,n,r,o=null,i=null,a=null,l=null;for(t=0;t<yr.r.length;t++)for(e=[],i=yr.r[t],0!==t&&(l=ve(i.rooms,e),l.s=(t+1)%pr.length),n=0;n<i.rooms.length;n++)for(l=i.rooms[n],0===t&&l.sr&&(l.s=(t+1)%pr.length),r=0;r<l.d.length;r++)o=l.d[r],a=Xe(o,l).r,a!==i&&-1===o.o.dt&&(o.o.dt=t%pr.length)}function He(t){-1===vn.keys.indexOf(t.s)&&t.s>-1&&(vn.keys.push(t.s),Ue())}function Ue(){var t,e,n,r,o,i;for(sn.innerHTML="find "+(5-vn.keys.length)+" color circles",5-vn.keys.length===0&&(sn.innerHTML="find the exit"),t=0;t<yr.r.length;t++)vn.keys.indexOf(yr.r[t].id)>-1&&(yr.r[t].u=!0);for(e=0;e<yr.rooms.length;e++){for(n=!1,r=yr.rooms[e],vn.keys.indexOf(r.s)>-1&&(r.s=-1,null!==r.map&&(o=r.map.map.indexOf(9),o>-1&&(r.map.map[o]=0))),t=0;t<r.d.length;t++)i=r.d[t],vn.keys.indexOf(i.dt)>-1&&(i.dt=-1,n=!0);n&&null!==r.map&&-1===r.s}}function Xe(t,e){return t.r1===e?t.r2:t.r1}function Ye(){yr={width:0,height:0,rooms:[],f:[],r:[],cr:0},xr=0,yr.width=80,yr.height=48,ge(40,24,_e()),Ae(1)}function _e(){var t=Ge(pr[xr],parseInt(3*Math.random())+parseInt(3*Math.random())+1,parseInt(3*Math.random())+parseInt(3*Math.random())+1,xr);return xr=(xr+1)%pr.length,t}function Ge(t,e,n,r){return{color:t,maxW:e,maxH:n,id:r,u:!1,bds:[],rooms:[]}}var Je,Ke,Qe,Ve,Ze,$e,tn,en,nn,rn,on,an,ln,fn,hn,un,dn,sn,yn,cn,mn,xn,pn,gn,wn,vn,kn,bn,Sn,Mn,Tn,Pn,Fn,Cn,jn,En,Wn,Dn,An,Ln,Bn,On,In,Rn,Nn,qn,zn,Hn,Un,Xn,Yn,_n,Gn,Jn,Kn,Qn,Vn,Zn,$n,tr,er,nr,rr,or,ir,ar,lr,fr,hr,ur,dr,sr,yr,cr,mr,xr,pr,gr=44100,wr=2,vr=33,kr=null,br=[n,r,o,i],Sr=150,Mr=e.getElementById("f"),Tr=e.createElement("canvas");for(Tr.height=16,Tr.width=16,Je=Tr.getContext("2d"),Ke=0,Qe=0,Ve=[],Ze=0,$e=!1,tn=0,yn=!0,cn=!0,mn=new CustomEvent("frame"),xn=t.performance.now(),pn=t.performance.now(),gn={},wn={},vn={x:-1,y:-1,w:16,h:32,img:null,xd:0,yd:1,xa:0,ya:0,maxa:5,jf:7,jh:50,js:0,j:0,ju:0,ht:0,mj:1,a:0,"ῼ":5,dc:t.performance.now(),"mῼ":5,keys:[]},kn=xn-pn,bn=[vn],Sn={a:65,w:87,s:83,d:68,space:32,shift:16,ctrl:17,alt:18,tab:9,debug:192},A("keydown",Y),A("keyup",_),A("resize",I),A("DOMContentLoaded",O),A("frame",R),A("frame",ce),A("mousemove",G),A("mousedown",J),A("mouseup",K),A("contextmenu",V),t.addEventListener("resize",L),e.addEventListener("DOMContentLoaded",L),e.addEventListener("mousedown",L),e.addEventListener("mouseup",L),e.addEventListener("keydown",L),e.addEventListener("keyup",L),e.addEventListener("frame",L),e.addEventListener("mousemove",L),e.addEventListener("contextmenu",L),Mn=0,Tn=0,Pn=0,Fn=[],Cn=t.performance.now(),jn=!1,En=!1,Wn=150,Dn=[0,0,0,0,0],An=-1,Ln=-1,Bn=0,On={songLen:29,songData:[{oo:7,od:0,oe:0,ox:0,ov:127,ow:1,po:6,pd:0,pe:9,px:0,pv:93,pw:1,nf:0,ea:137,es:2e3,er:4611,em:192,ff:1,fq:982,fr:89,ft:6,fm:25,fp:6,ft:77,lf:0,lq:1,lr:3,la:69,lw:0,p:[1,1,1,1,2,2],c:[{n:[0,135,135,135,135,135,135,135,135,135,135,135,135,135,0,0,135,140,140,0,0,0,0,140,137,0,135,135,135,0,0,0]},{n:[0,142,142,142,142,142,142,142,142,142,142,142,142,142,0,0,142,147,147,0,0,0,0,147,144,0,142,142,142,0,0,0]}]},{oo:7,od:0,oe:0,ox:0,ov:192,ow:2,po:7,pd:0,pe:0,px:0,pv:201,pw:3,nf:0,ea:100,es:150,er:13636,em:191,ff:2,fq:5839,fr:254,ft:6,fm:121,fp:6,ft:147,lf:0,lq:1,lr:6,la:195,lw:0,p:[2,2,2,2,3,3],c:[{n:[135,0,135,0,0,135,0,135,135,0,135,0,0,135,0,135,135,0,135,0,0,135,0,135,135,0,135,0,0,135,0,135]},{n:[135,0,0,0,135,0,0,0,135,0,0,0,135,0,0,0,135,0,0,0,135,0,0,0,135,0,0,0,135,0,0,0]},{n:[149,0,0,0,149,0,0,0,149,0,0,0,149,0,0,0,149,0,0,0,149,0,0,0,149,0,0,0,149,0,0,0]}]},{oo:7,od:0,oe:0,ox:0,ov:192,ow:2,po:7,pd:0,pe:0,px:0,pv:201,pw:3,nf:0,ea:100,es:150,er:13636,em:191,ff:2,fq:5839,fr:254,ft:6,fm:121,fp:6,ft:147,lf:0,lq:1,lr:6,la:195,lw:0,p:[1,1,1,1,2,2],c:[{n:[154,0,151,0,0,156,152,0,0,154,0,0,151,0,156,0,0,152,0,0,154,0,0,151,0,0,154,154,0,0,0,0]},{n:[161,0,158,0,0,163,159,0,0,161,0,0,158,0,163,0,0,159,0,0,161,0,0,158,0,0,161,161,0,0,0,0]}]}],rowLen:5606,endPattern:7},In=h(On),u(In,function(t){Nn=t,te()}),qn=!1,zn=0,Hn=0,Un=0,Xn=0,Yn=0,_n=Un,Gn=Un,Jn=[],Kn=[],Qn=0;100>Qn;Qn++)Kn[Qn]=0;for(Vn="1111111111111111111100000000000000000000000000000000000000000000000000000000000011111111111111111111,1100000011111000001111110000111100000011110000001111000000111100000111110000111111000000111100000011,1000000001110000001111100001110001001000000000000000000000000000000000000111100011111111111111111111,1111111111111000011100000000000000000000000011000000011110000000000000000000000011000000111100000111,1111000011110000001111000000111100000011110001111111000000001100000000110000000011111111111111111111,1111111111100000000010000000001000000000100000000010000000001000000000100000000010000011111000000011,1111111111000000000100000000010000000001000000000100000000010000000001000000000110000000011100000001,1111000011110000001111000000111100000011110001111100000111110000111111000011111111111111111111111111,1110000011110000000100000000000000000000000011000000001100000000000000000000000011000000111100000111,1100000011111000001100110000110000000011000000001100000000110000000111000000111111000000111100000011,1100000011111000001111110000001100000000110000000011000000001100000111110000111111000000111100000011".split(","),Jn.push({map:Kn,type:0}),Qn=0;Qn<Vn.length;Qn++)Jn.push(fe(Qn+1,Vn[Qn]));Zn=null,$n=0,tr=0,er=0,nr=0,rr=null,or=!1,ir=e.createElement("canvas"),ar=ir.getContext("2d"),lr=0,fr=1,hr=0,ur=0,dr=0,sr=0,yr=null,cr=null,mr=.2,xr=0,pr=[{bg:"#BBBBBB",bd:"#A0A0A0",o:"#CFCFCF",l:"#FFFFFF",name:"Dungeon"},{bg:"#FF3333",bd:"#990000",o:"#FF0000",l:"#FFAAAA",name:"Fire"},{bg:"#00BB00",bd:"#006600",o:"#00BB00",l:"#AAFFAA",name:"Air"},{bg:"#3333FF",bd:"#000066",o:"#0000FF",l:"#AAAAFF",name:"Water"},{bg:"#9F9F9F",bd:"#555555",o:"#555555",l:"#000000",name:"Earth"}]}(window,document);