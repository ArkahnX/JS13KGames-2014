function o(o,r,e){null!==o.img&&context.drawImage(o.img,o.x||r,o.y||e,o.w,o.h)}function r(o,r,e,t){Wr[r][e]||(o[e]=t,Wr[r][e]=t),Wr[r][e]!==t&&(o[e]=t,Wr[r][e]=t)}function e(){for(var o=(he[0].width,he[0].height,10*he[0].size),r=0;o>r;r++)for(var e=0;o>e;e++)0!==he[0].map[X(e,r,o)]&&n(e,r,he[0].map,o,1,1);for(var r=0;o>r;r++)for(var e=0;o>e;e++)0!==he[0].map[X(e,r,o)]&&drawTile(e,r,he[0].map,o,1,1)}function t(){Dr.fillStyle="#FF9900",r(kr,"border","strokeStyle","#ff0000"),r(kr,"border","lineWidth",2);var o=window.performance.now(),e=T(_r)-1,t=T(oe)-1,l=T(_r)+T(br.width)+2,m=T(oe)+T(br.height)+2;0>e&&(e=0),0>t&&(t=0),l>me&&(l=me),m>me&&(m=me);for(var s=t;m>s;s++)for(var d,p=0,c=16*-me*2,u=0,h=e;l>h;h++)0!==Le[X(h,s,me)]&&(p+=16,c===16*-me*2&&(c=16*h-_r),d=0>s-1?-1:Le[X(h,s-1,me)],0===d&&(u=1)),(0===Le[X(h,s,me)]||h===l-1)&&n(h,s,Le,me,c,p,u),(0===Le[X(h,s,me)]||h===l-1)&&(p=0,c=16*-me*2,u=0);a(e,t,l,m,1),a(e,t,l,m,4),i(e,t,l,m,2),i(e,t,l,m,8);var g=window.performance.now()-o;g>Yr&&(Yr=g)}function n(o,r,e,t,n,a,i){var l=n,m=16*r-oe;1===i?Dr.fillRect(l,m-5,a,21):Dr.fillRect(l,m,a,16)}function a(o,r,e,t,n){for(var a=o;e>a;a++)for(var i=0,m=16*-me*2,s=0,d=0,p=r;t>p;p++){var c=Le[X(a+1,p-1,me)],u=Le[X(a,p-1,me)],h=Le[X(a-1,p-1,me)];if(1===n?(d=Le[X(a-1,p,me)],0>a-1&&(d=-1)):4===n&&(d=Le[X(a+1,p,me)],a+1>me-1&&(d=-1)),0!==Le[X(a,p,me)]&&1>d&&(i+=16,m===16*-me*2&&(0===u&&(s=1),m=16*p-oe)),0===Le[X(a,p,me)]||p===t-1||d>0){kr.beginPath();var g=m,y=16*a-_r,f=g+i,w=16*(a+1)-_r,v=y;4===n&&(v=w),s&&(g-=5),(4===n&&0===c||1===n&&0===h)&&d>0?l(v,g,v,f+3):l(v,g,v,f),kr.closePath(),kr.stroke()}(0===Le[X(a,p,me)]||p===t-1||d>0)&&(i=0,m=16*-me*2,s=0)}}function i(o,r,e,t,n){for(var a=r;t>a;a++)for(var i=0,m=16*-me*2,s=0,d=0,p=o;e>p;p++){if(2===n?0>a-1?d=-1:(d=Le[X(p,a-1,me)],s=1):8===n&&(d=Le[X(p,a+1,me)],a+1>me-1&&(d=-1)),0!==Le[X(p,a,me)]&&1>d&&(i+=16,m===16*-me*2&&(m=16*p-_r)),0===Le[X(p,a,me)]||p===e-1||d>0){kr.beginPath();var c=m,u=16*a-oe,h=c+i,g=16*(a+1)-oe;2===n?1===s?(l(c,u-5,h,u-5),l(c,u+3,h,u+3)):l(c,u,h,u):8===n&&l(c,g,h,g),kr.closePath(),kr.stroke()}(0===Le[X(p,a,me)]||p===e-1||d>0)&&(i=0,m=16*-me*2,s=0)}}function l(o,r,e,t){kr.moveTo(o,r),kr.lineTo(e,t)}function m(){var o=null;Sr.width=300,Sr.height=300,Hr.clearRect(0,0,Sr.width,Sr.height),G();for(var r=0;r<De.rooms.length;r++)o=De.rooms[r],Hr.lineWidth=2,Hr.strokeStyle=o.region.color.border,Hr.fillStyle=o.region.color.background,Hr.rect(16*o.mapX-re,16*o.mapY-ee,16*o.mapW,16*o.mapH),Hr.fill(),Hr.stroke(),p(o);for(var r=0;r<De.rooms.length;r++)o=De.rooms[r],p(o);u();for(var r=0;r<De.rooms.length;r++)o=De.rooms[r],s(o)}function s(o){for(var r=null,e=0;e<o.doors.length;e++){r=o.doors[e];var t=Be[r.doorType].lock;if(r.doorType>0)switch(r.dir){case"N":d(16*r.mapX+5,16*r.mapY,t);continue;case"S":d(16*r.mapX+5,16*r.mapY+16,t);continue;case"W":d(16*r.mapX-3,16*r.mapY+8,t);continue;case"E":d(16*r.mapX+13,16*r.mapY+8,t);continue;default:continue}}var t=Be[o.specialType].lock;o.specialType>0&&d(16*(o.mapX+o.mapW/2)-3,16*(o.mapY+o.mapH/2),"rgba(0,0,0,0)",t)}function d(o,r,e,t){var n=3;Hr.beginPath(),Hr.arc(o+n-re,r-ee,n,0,2*Math.PI,!1),Hr.fillStyle=e,Hr.fill(),t&&(Hr.lineWidth=2,Hr.strokeStyle=t,Hr.stroke())}function p(o){var r=null;Hr.lineWidth=1;for(var e=4,t=0;t<o.doors.length;t++)switch(r=o.doors[t],r.dir){case"N":var n="#FF0000";Hr.strokeStyle=n,c(16*r.mapX+e,16*r.mapY+2,16*r.mapX+16-e,16*r.mapY+2,n);continue;case"S":var n="#00FF00";Hr.strokeStyle=n,c(16*r.mapX+e,16*(r.mapY+1),16*r.mapX+16-e,16*(r.mapY+1),n);continue;case"W":var n="#0000FF";Hr.strokeStyle=n,c(16*r.mapX+2,16*r.mapY+e,16*r.mapX+2,16*r.mapY+16-e,n);continue;case"E":var n="#FFFF00";Hr.strokeStyle=n,c(16*(r.mapX+1),16*r.mapY+e,16*(r.mapX+1),16*r.mapY+16-e,n);continue;default:continue}}function c(o,r,e,t){Hr.beginPath(),Hr.moveTo(o-re,r-ee),Hr.lineTo(e-re,t-ee),Hr.stroke(),Hr.closePath()}function u(){Hr.fillStyle="rgba(200,200,255,0.6)",Hr.strokeStyle="rgba(200,200,255,0.8)",Hr.rect(16*ke.mapX+16*ke.startPositionX-re,16*ke.mapY+16*ke.startPositionY-ee,16,16),Hr.fill(),Hr.stroke()}function o(o,r,e){null!==o.img&&context.drawImage(o.img,o.x||r,o.y||e,o.w,o.h)}function r(o,r,e,t){Wr[r][e]||(o[e]=t,Wr[r][e]=t),Wr[r][e]!==t&&(o[e]=t,Wr[r][e]=t)}function e(){for(var o=(he[0].width,he[0].height,10*he[0].size),r=0;o>r;r++)for(var e=0;o>e;e++)0!==he[0].map[X(e,r,o)]&&n(e,r,he[0].map,o,1,1);for(var r=0;o>r;r++)for(var e=0;o>e;e++)0!==he[0].map[X(e,r,o)]&&drawTile(e,r,he[0].map,o,1,1)}function t(){Dr.fillStyle="#FF9900",r(kr,"border","strokeStyle","#ff0000"),r(kr,"border","lineWidth",2);var o=window.performance.now(),e=T(_r)-1,t=T(oe)-1,l=T(_r)+T(br.width)+2,m=T(oe)+T(br.height)+2;0>e&&(e=0),0>t&&(t=0),l>me&&(l=me),m>me&&(m=me);for(var s=t;m>s;s++)for(var d,p=0,c=16*-me*2,u=0,h=e;l>h;h++)0!==Le[X(h,s,me)]&&(p+=16,c===16*-me*2&&(c=16*h-_r),d=0>s-1?-1:Le[X(h,s-1,me)],0===d&&(u=1)),(0===Le[X(h,s,me)]||h===l-1)&&n(h,s,Le,me,c,p,u),(0===Le[X(h,s,me)]||h===l-1)&&(p=0,c=16*-me*2,u=0);a(e,t,l,m,1),a(e,t,l,m,4),i(e,t,l,m,2),i(e,t,l,m,8);var g=window.performance.now()-o;g>Yr&&(Yr=g)}function n(o,r,e,t,n,a,i){var l=n,m=16*r-oe;1===i?Dr.fillRect(l,m-5,a,21):Dr.fillRect(l,m,a,16)}function a(o,r,e,t,n){for(var a=o;e>a;a++)for(var i=0,m=16*-me*2,s=0,d=0,p=r;t>p;p++){var c=Le[X(a+1,p-1,me)],u=Le[X(a,p-1,me)],h=Le[X(a-1,p-1,me)];if(1===n?(d=Le[X(a-1,p,me)],0>a-1&&(d=-1)):4===n&&(d=Le[X(a+1,p,me)],a+1>me-1&&(d=-1)),0!==Le[X(a,p,me)]&&1>d&&(i+=16,m===16*-me*2&&(0===u&&(s=1),m=16*p-oe)),0===Le[X(a,p,me)]||p===t-1||d>0){kr.beginPath();var g=m,y=16*a-_r,f=g+i,w=16*(a+1)-_r,v=y;4===n&&(v=w),s&&(g-=5),(4===n&&0===c||1===n&&0===h)&&d>0?l(v,g,v,f+3):l(v,g,v,f),kr.closePath(),kr.stroke()}(0===Le[X(a,p,me)]||p===t-1||d>0)&&(i=0,m=16*-me*2,s=0)}}function i(o,r,e,t,n){for(var a=r;t>a;a++)for(var i=0,m=16*-me*2,s=0,d=0,p=o;e>p;p++){if(2===n?0>a-1?d=-1:(d=Le[X(p,a-1,me)],s=1):8===n&&(d=Le[X(p,a+1,me)],a+1>me-1&&(d=-1)),0!==Le[X(p,a,me)]&&1>d&&(i+=16,m===16*-me*2&&(m=16*p-_r)),0===Le[X(p,a,me)]||p===e-1||d>0){kr.beginPath();var c=m,u=16*a-oe,h=c+i,g=16*(a+1)-oe;2===n?1===s?(l(c,u-5,h,u-5),l(c,u+3,h,u+3)):l(c,u,h,u):8===n&&l(c,g,h,g),kr.closePath(),kr.stroke()}(0===Le[X(p,a,me)]||p===e-1||d>0)&&(i=0,m=16*-me*2,s=0)}}function l(o,r,e,t){kr.moveTo(o,r),kr.lineTo(e,t)}function m(){var o=null;br.width=16*De.width,br.height=16*De.height,Lr.clearRect(0,0,br.width,br.height);for(var r=0;r<De.rooms.length;r++)o=De.rooms[r],Lr.lineWidth=3,Lr.strokeStyle=o.region.color.border,Lr.fillStyle=o.region.color.background,Lr.rect(16*o.mapX,16*o.mapY,16*o.mapW,16*o.mapH),Lr.fill(),Lr.stroke(),p(o);for(var r=0;r<De.rooms.length;r++)o=De.rooms[r],p(o);for(var r=0;r<De.rooms.length;r++)o=De.rooms[r],s(o)}function s(o){for(var r=null,e=0;e<o.doors.length;e++){r=o.doors[e];var t=Be[r.doorType].lock;if(r.doorType>0)switch(r.dir){case"N":d(16*r.mapX+5,16*r.mapY,t);continue;case"S":d(16*r.mapX+5,16*r.mapY+16,t);continue;case"W":d(16*r.mapX-3,16*r.mapY+8,t);continue;case"E":d(16*r.mapX+13,16*r.mapY+8,t);continue;default:continue}}var t=Be[o.specialType].lock;o.specialType>0&&d(16*(o.mapX+o.mapW/2)-3,16*(o.mapY+o.mapH/2),"rgba(0,0,0,0)",t)}function d(o,r,e,t){var n=3;Lr.beginPath(),Lr.arc(o+n,r,n,0,2*Math.PI,!1),Lr.fillStyle=e,Lr.fill(),t&&(Lr.lineWidth=2,Lr.strokeStyle=t,Lr.stroke())}function p(o){var r=null,e=o.region.color.background;Lr.lineWidth=1,Lr.strokeStyle=e;for(var t=4,n=0;n<o.doors.length;n++)switch(r=o.doors[n],r.dir){case"N":c(16*r.mapX+t,16*r.mapY-2,16*r.mapX+16-t,16*r.mapY-2,e);continue;case"S":c(16*r.mapX+t,16*(r.mapY+1),16*r.mapX+16-t,16*(r.mapY+1),e);continue;case"W":c(16*r.mapX,16*r.mapY+t,16*r.mapX,16*r.mapY+16-t,e);continue;case"E":c(16*(r.mapX+1),16*r.mapY+t,16*(r.mapX+1),16*r.mapY+16-t,e);continue;default:continue}}function c(o,r,e,t){Lr.beginPath(),Lr.moveTo(o,r),Lr.lineTo(e,t),Lr.stroke(),Lr.closePath()}function h(){var o=null,r=0;Lr.fillStyle="rgba(255,255,255,0.3)";for(var e=_();r<e.length;)o=e[r],Lr.fillRect(16*o.x,16*o.y,16,16),drawRectangle(O(o.x,o.y,1,1,null)),r++}function o(o,r,e){null!==o.img&&context.drawImage(o.img,o.x||r,o.y||e,o.w,o.h)}function r(o,r,e,t){Wr[r][e]||(o[e]=t,Wr[r][e]=t),Wr[r][e]!==t&&(o[e]=t,Wr[r][e]=t)}function e(){for(var o=(he[0].width,he[0].height,10*he[0].size),r=0;o>r;r++)for(var e=0;o>e;e++)0!==he[0].map[X(e,r,o)]&&n(e,r,he[0].map,o,1,1);for(var r=0;o>r;r++)for(var e=0;o>e;e++)0!==he[0].map[X(e,r,o)]&&drawTile(e,r,he[0].map,o,1,1)}function t(){Dr.fillStyle="#FF9900",r(kr,"border","strokeStyle","#ff0000"),r(kr,"border","lineWidth",2);var o=window.performance.now(),e=T(_r)-1,t=T(oe)-1,l=T(_r)+T(br.width)+2,m=T(oe)+T(br.height)+2;0>e&&(e=0),0>t&&(t=0),l>me&&(l=me),m>me&&(m=me);for(var s=t;m>s;s++)for(var d,p=0,c=16*-me*2,u=0,h=e;l>h;h++)0!==Le[X(h,s,me)]&&(p+=16,c===16*-me*2&&(c=16*h-_r),d=0>s-1?-1:Le[X(h,s-1,me)],0===d&&(u=1)),(0===Le[X(h,s,me)]||h===l-1)&&n(h,s,Le,me,c,p,u),(0===Le[X(h,s,me)]||h===l-1)&&(p=0,c=16*-me*2,u=0);a(e,t,l,m,1),a(e,t,l,m,4),i(e,t,l,m,2),i(e,t,l,m,8);var g=window.performance.now()-o;g>Yr&&(Yr=g)}function n(o,r,e,t,n,a,i){var l=n,m=16*r-oe;1===i?Dr.fillRect(l,m-5,a,21):Dr.fillRect(l,m,a,16)}function a(o,r,e,t,n){for(var a=o;e>a;a++)for(var i=0,m=16*-me*2,s=0,d=0,p=r;t>p;p++){var c=Le[X(a+1,p-1,me)],u=Le[X(a,p-1,me)],h=Le[X(a-1,p-1,me)];if(1===n?(d=Le[X(a-1,p,me)],0>a-1&&(d=-1)):4===n&&(d=Le[X(a+1,p,me)],a+1>me-1&&(d=-1)),0!==Le[X(a,p,me)]&&1>d&&(i+=16,m===16*-me*2&&(0===u&&(s=1),m=16*p-oe)),0===Le[X(a,p,me)]||p===t-1||d>0){kr.beginPath();var g=m,y=16*a-_r,f=g+i,w=16*(a+1)-_r,v=y;4===n&&(v=w),s&&(g-=5),(4===n&&0===c||1===n&&0===h)&&d>0?l(v,g,v,f+3):l(v,g,v,f),kr.closePath(),kr.stroke()}(0===Le[X(a,p,me)]||p===t-1||d>0)&&(i=0,m=16*-me*2,s=0)}}function i(o,r,e,t,n){for(var a=r;t>a;a++)for(var i=0,m=16*-me*2,s=0,d=0,p=o;e>p;p++){if(2===n?0>a-1?d=-1:(d=Le[X(p,a-1,me)],s=1):8===n&&(d=Le[X(p,a+1,me)],a+1>me-1&&(d=-1)),0!==Le[X(p,a,me)]&&1>d&&(i+=16,m===16*-me*2&&(m=16*p-_r)),0===Le[X(p,a,me)]||p===e-1||d>0){kr.beginPath();var c=m,u=16*a-oe,h=c+i,g=16*(a+1)-oe;2===n?1===s?(l(c,u-5,h,u-5),l(c,u+3,h,u+3)):l(c,u,h,u):8===n&&l(c,g,h,g),kr.closePath(),kr.stroke()}(0===Le[X(p,a,me)]||p===e-1||d>0)&&(i=0,m=16*-me*2,s=0)}}function l(o,r,e,t){kr.moveTo(o,r),kr.lineTo(e,t)}function m(){var o=null;br.width=16*De.width,br.height=16*De.height,Lr.clearRect(0,0,br.width,br.height);for(var r=0;r<De.rooms.length;r++)o=De.rooms[r],Lr.lineWidth=3,Lr.strokeStyle=o.region.color.border,Lr.fillStyle=o.region.color.background,Lr.rect(16*o.mapX,16*o.mapY,16*o.mapW,16*o.mapH),Lr.fill(),Lr.stroke(),p(o);for(var r=0;r<De.rooms.length;r++)o=De.rooms[r],p(o);for(var r=0;r<De.rooms.length;r++)o=De.rooms[r],s(o)}function s(o){for(var r=null,e=0;e<o.doors.length;e++){r=o.doors[e];var t=Be[r.doorType].lock;if(r.doorType>0)switch(r.dir){case"N":d(16*r.mapX+5,16*r.mapY,t);continue;case"S":d(16*r.mapX+5,16*r.mapY+16,t);continue;case"W":d(16*r.mapX-3,16*r.mapY+8,t);continue;case"E":d(16*r.mapX+13,16*r.mapY+8,t);continue;default:continue}}var t=Be[o.specialType].lock;o.specialType>0&&d(16*(o.mapX+o.mapW/2)-3,16*(o.mapY+o.mapH/2),"rgba(0,0,0,0)",t)}function d(o,r,e,t){var n=3;Lr.beginPath(),Lr.arc(o+n,r,n,0,2*Math.PI,!1),Lr.fillStyle=e,Lr.fill(),t&&(Lr.lineWidth=2,Lr.strokeStyle=t,Lr.stroke())}function p(o){var r=null;Lr.lineWidth=1;for(var e=4,t=0;t<o.doors.length;t++)switch(r=o.doors[t],r.dir){case"N":var n="#FF0000";Lr.strokeStyle=n,c(16*r.mapX+e,16*r.mapY+2,16*r.mapX+16-e,16*r.mapY+2,n);continue;case"S":var n="#00FF00";Lr.strokeStyle=n,c(16*r.mapX+e,16*(r.mapY+1),16*r.mapX+16-e,16*(r.mapY+1),n);continue;case"W":var n="#0000FF";Lr.strokeStyle=n,c(16*r.mapX+2,16*r.mapY+e,16*r.mapX+2,16*r.mapY+16-e,n);continue;case"E":var n="#000000";Lr.strokeStyle=n,c(16*(r.mapX+1),16*r.mapY+e,16*(r.mapX+1),16*r.mapY+16-e,n);continue;default:continue}}function c(o,r,e,t){Lr.beginPath(),Lr.moveTo(o,r),Lr.lineTo(e,t),Lr.stroke(),Lr.closePath()}function h(){var o=null,r=0;Lr.fillStyle="rgba(255,255,255,0.3)";for(var e=_();r<e.length;)o=e[r],Lr.fillRect(16*o.x,16*o.y,16,16),drawRectangle(O(o.x,o.y,1,1,null)),r++}function g(o,r){Jr[o]||(Jr[o]=[]),Jr[o].push(r)}function y(o,r,e,t,n,a){var i={x:o,y:r,w:e,h:t,angle:0,img:n};return a&&(i.xDirection=0,i.yDirection=0,i.xAccel=0,i.yAccel=1,i.maxAccel=5),a&&(i.jumpForce=7,i.jumpHeight=50,i.jumpStart=0,i.jumping=0,i.jumpsUsed=0,i.maxJumps=3),i}function f(o){var r=o.type;if(Jr[r]&&Jr[r].length>0)for(var e=0;e<Jr[r].length;e++)Jr[r][e](o)}function w(o,r){return document[Br[o]](r)}function v(){br=w(Er,"player"),Ar=w(Er,"border"),Fr=w(Er,"tile"),Sr=w(Er,"minimap"),Lr=br.getContext("2d"),kr=Ar.getContext("2d"),Dr=Fr.getContext("2d"),Hr=Sr.getContext("2d"),x(),Cr();for(var o=0;o<Be.length;o++){for(var r=M(10,20),e=0;r>e;e++)Mr();Tr()}Xr(),C()}function x(){Ar.width=br.width=Fr.width=Sr.width=window.innerWidth>300?300:window.innerWidth,Ar.height=br.height=Fr.height=Sr.width=window.innerHeight>300?300:window.innerHeight}function R(){for(var o=0;o<Gr.length;o++){var e=Gr[o];H(e),e.x=Y(e.x),e.y=Y(e.y),q(),I(e),E(e),S(e),B(e)}K(),Lr.clearRect(0,0,br.width,br.height),kr.clearRect(0,0,Ar.width,Ar.height),r(Dr,"tile","fillStyle","#000000"),Dr.fillRect(0,0,Fr.width,Fr.height),Dr.clearRect(0-_r,0-oe,de,se),t(),Lr.fillStyle="#000000";for(var o=0;o<Gr.length;o++){var e=Gr[o],n=(15-15*(qr.health/qr.maxHealth)).toString(16);Lr.fillStyle="#"+n+n+"0000",Lr.fillRect(e.x-_r,e.y-oe,e.w,e.h)}}function C(){Vr=window.performance.now(),Kr=Vr-zr,zr=Vr,document.dispatchEvent(jr),Nr&&requestAnimationFrame(C)}function g(o,r){Jr[o]||(Jr[o]=[]),Jr[o].push(r)}function y(o,r,e,t,n,a){var i={x:o,y:r,w:e,h:t,angle:0,img:n};return a&&(i.xDirection=0,i.yDirection=0,i.xAccel=0,i.yAccel=1,i.maxAccel=5),a&&(i.jumpForce=7,i.jumpHeight=50,i.jumpStart=0,i.jumping=0,i.jumpsUsed=0,i.maxJumps=3),i}function f(o){var r=o.type;if(Jr[r]&&Jr[r].length>0)for(var e=0;e<Jr[r].length;e++)Jr[r][e](o)}function w(o,r){return document[Br[o]](r)}function v(){br=w(Er,"player"),Ar=w(Er,"border"),Fr=w(Er,"tile"),Sr=w(Er,"minimap"),Lr=br.getContext("2d"),kr=Ar.getContext("2d"),Dr=Fr.getContext("2d"),Hr=Sr.getContext("2d"),x(),Cr();for(var o=0;o<Be.length;o++){for(var r=M(10,20),e=0;r>e;e++)Mr();Tr()}Xr(),m(),C()}function x(){Ar.width=br.width=Fr.width=Sr.width=window.innerWidth>300?300:window.innerWidth,Ar.height=br.height=Fr.height=Sr.width=window.innerHeight>300?300:window.innerHeight}function R(){for(var o=0;o<Gr.length;o++){var e=Gr[o];H(e),e.x=Y(e.x),e.y=Y(e.y),q(),I(e),E(e),S(e),B(e)}K(),Lr.clearRect(0,0,br.width,br.height),kr.clearRect(0,0,Ar.width,Ar.height),r(Dr,"tile","fillStyle","#000000"),Dr.fillRect(0,0,Fr.width,Fr.height),Dr.clearRect(0-_r,0-oe,de,se),t(),Lr.fillStyle="#000000";for(var o=0;o<Gr.length;o++){var e=Gr[o],n=(15-15*(qr.health/qr.maxHealth)).toString(16);Lr.fillStyle="#"+n+n+"0000",Lr.fillRect(e.x-_r,e.y-oe,e.w,e.h)}}function C(){Vr=window.performance.now(),Kr=Vr-zr,zr=Vr,document.dispatchEvent(jr),Nr&&requestAnimationFrame(C)}function g(o,r){Jr[o]||(Jr[o]=[]),Jr[o].push(r)}function y(o,r,e,t,n,a){var i={x:o,y:r,w:e,h:t,angle:0,img:n};return a&&(i.xDirection=0,i.yDirection=0,i.xAccel=0,i.yAccel=1,i.maxAccel=5),a&&(i.jumpForce=7,i.jumpHeight=50,i.jumpStart=0,i.jumping=0,i.jumpsUsed=0,i.maxJumps=3),i}function f(o){var r=o.type;if(Jr[r]&&Jr[r].length>0)for(var e=0;e<Jr[r].length;e++)Jr[r][e](o)}function w(o,r){return document[Br[o]](r)}function v(){br=w(Er,"player"),Ar=w(Er,"border"),Fr=w(Er,"tile"),Sr=w(Er,"minimap"),Lr=br.getContext("2d"),kr=Ar.getContext("2d"),Dr=Fr.getContext("2d"),Hr=Sr.getContext("2d"),x(),Cr();for(var o=0;o<Be.length;o++){for(var r=M(10,20),e=0;r>e;e++)Mr();Tr()}Xr(),C()}function x(){Ar.width=br.width=Fr.width=Sr.width=window.innerWidth>300?300:window.innerWidth,Ar.height=br.height=Fr.height=Sr.width=window.innerHeight>300?300:window.innerHeight}function R(){for(var o=0;o<Gr.length;o++){var e=Gr[o];H(e),e.x=Y(e.x),e.y=Y(e.y),q(),I(e),E(e),S(e),B(e)}K(),Lr.clearRect(0,0,br.width,br.height),kr.clearRect(0,0,Ar.width,Ar.height),r(Dr,"tile","fillStyle","#000000"),Dr.fillRect(0,0,Fr.width,Fr.height),Dr.clearRect(0-_r,0-oe,de,se),t(),Lr.fillStyle="#000000";for(var o=0;o<Gr.length;o++){var e=Gr[o],n=(15-15*(qr.health/qr.maxHealth)).toString(16);Lr.fillStyle="#"+n+n+"0000",Lr.fillRect(e.x-_r,e.y-oe,e.w,e.h)}}function C(){Vr=window.performance.now(),Kr=Vr-zr,zr=Vr,document.dispatchEvent(jr),Nr&&requestAnimationFrame(C)}function M(o,r){return Math.floor(Math.random()*(r-o+1)+o)}function T(o,r){var e=o%(r||16);return(o-e)/(r||16)}function X(o,r,e){return r*e+o}function W(o,r){if("object"==typeof r){for(var e=0;e<o.length;e++){var t=!0;if("object"==typeof o[e]){for(var n in r)if(o[e][n]!==r[n]){t=!1;break}if(t===!0)return e}}return-1}return o.indexOf(r)}function Y(o){return~~(.5+o)}function P(o){for(var r in Qr)Qr[r]===o.keyCode&&o.preventDefault();Ur[o.keyCode]!==o.type&&o.keyCode===Qr.space&&(qr.jumping=1),Ur[o.keyCode]=o.type,o.keyCode===Qr.d?qr.xDirection=1:o.keyCode===Qr.a&&(qr.xDirection=-1)}function b(o){for(var r in Qr)Qr[r]===o.keyCode&&o.preventDefault();Ur[o.keyCode]!==o.type&&o.keyCode===Qr.space&&(qr.jumping=0),Ur[o.keyCode]=o.type,(o.keyCode===Qr.d||o.keyCode===Qr.a)&&(Ur[Qr.d]&&Ur[Qr.a]?Ur[Qr.d]===o.type&&Ur[Qr.a]===o.type&&(qr.xDirection=0):qr.xDirection=0)}function F(o){te.length=o.length}function A(o,r,e,t){te.length=0;for(var n=0,a=0;r>a;a++)for(var i=0;e>i;i++)0===t&&(n=X(a,i,10)),1===t&&(n=X(i,r-a-1,10)),2===t&&(n=X(r-a-1,e-i-1,10)),3===t&&(n=X(e-i-1,a,10)),te[X(a,i,10)]=o[n];return te.slice(0)}function L(){}function D(){for(var o,r=0;$r>r;r++)for(var e=0;$r>e;e++){var t=Math.floor(e/10)+"-"+Math.floor(r/10);if(e%10===0||r%10===0){var n=null;ne[t]||(n=M(0,3),o=N(ue[M(0,9)]),1===Math.floor(e/10)&&1===Math.floor(r/10)&&(o=N(ue[9])),0===Math.floor(e/10)&&0===Math.floor(r/10)&&(o=N(ue[9])),1===Math.floor(e/10)&&0===Math.floor(r/10)&&(o=N(ue[7])),1===Math.floor(e/10)&&1===Math.floor(r/10)&&(o=N(ue[5])),2===Math.floor(e/10)&&1===Math.floor(r/10)&&(o=N(ue[7])),2===Math.floor(e/10)&&2===Math.floor(r/10)&&(o=N(ue[3])),ne[t]=4&o.options?A(o,10,10,n):o),o=ne[t]}Zr[X(e,r,$r)]=o.map[X(e%10,r%10,10)]}}function k(o,r,e){return(r*e||ce)+o}function H(o){o.xAccel=o.xAccel+o.xDirection/60*Kr,o.xAccel>o.maxAccel&&(o.xAccel=o.maxAccel),o.xAccel<-o.maxAccel&&(o.xAccel=-o.maxAccel),0===o.xDirection&&(o.xAccel>0?o.xAccel=o.xAccel+-2/60*Kr:o.xAccel<0&&(o.xAccel=o.xAccel+2/60*Kr),(o.xAccel<1/60*Kr&&o.xAccel>-1/60*Kr||1===o.yDirection||-1===o.yDirection)&&(o.xAccel=0)),o.x=o.x+o.xAccel}function S(o){o.jumping&&-1!==o.yDirection&&o.jumpsUsed<o.maxJumps&&(o.maxJumps>1&&0===o.jumpsUsed&&1===o.yDirection&&o.jumpsUsed++,(0===o.jumpsUsed&&0===o.yDirection||o.jumpsUsed>0||o.maxJumps>1)&&(o.yDirection=-1,o.yAccel=-o.jumpForce,o.jumpStart=o.y,o.jumpsUsed++)),(0===o.yDirection||!o.jumping||o.jumpStart-o.y>o.jumpHeight)&&(o.yDirection=1),1===o.yDirection&&(o.jumping=0,o.yAccel=o.yAccel+o.jumpForce/2/60*Kr),0===o.yDirection&&(o.yAccel>0?o.yAccel=o.yAccel+-1/60*Kr:o.yAccel<0&&(o.yAccel=o.yAccel+1/60*Kr),o.yAccel<1/60*Kr&&o.yAccel>-1/60*Kr&&(o.yAccel=0)),o.yAccel>o.maxAccel&&(o.yAccel=10),o.y=o.y+o.yAccel}function B(o){var r=o.x%16,e=X(T(o.x),T(o.y+o.h),me),t=X(T(o.x+o.w),T(o.y+o.h),me),n=!1;n=0===r?Le[e]:0!==Le[t]||0!==Le[e],(n||o.y+o.h>16*Ae)&&1===o.yDirection&&(o.y=16*T(o.y),o.yAccel=0,o.yDirection=0,o.jumpsUsed=0,o.jumping=0)}function E(o){var r=o.x%16,e=X(T(o.x),T(o.y-o.h/2),me),t=X(T(o.x+o.w),T(o.y-o.h/2),me),n=!1;n=0===r?0!==Le[e]:0!==Le[e]||0!==Le[t],n&&1===o.jumping&&(o.y=16*T(o.y),o.yAccel=-1,o.yDirection=1,o.jumping=0)}function I(o){var r=o.y%16,e=o.x%16,t=X(T(o.x),T(o.y-o.h/2),me),n=X(T(o.x+o.w),T(o.y-o.h/2),me),a=X(T(o.x),T(o.y),me),i=X(T(o.x+o.w),T(o.y),me),l=X(T(o.x),T(o.y+o.h/2),me),m=X(T(o.x+o.w),T(o.y+o.h/2),me),s=X(T(o.x),T(o.y+o.h),me),d=X(T(o.x+o.w),T(o.y+o.h),me),p=!1,c=!1;0===r?(p=0!==Le[l]||0!==Le[a],c=0!==Le[m]||0!==Le[i]):16*T(o.y+o.h)>o.y+o.h?(p=0!==Le[l]||0!==Le[a]||0!==Le[t],c=0!==Le[m]||0!==Le[i]||0!==Le[n]):(p=0!==Le[l]||0!==Le[a]||0!==Le[s],c=0!==Le[m]||0!==Le[i]||0!==Le[d]),0===e?(c||o.x+o.w>16*Fe||o.x<0)&&o.xAccel>0&&(o.x=16*T(o.x),o.xAccel=0):(c||o.x+o.w>16*Fe||o.x<0)&&o.xAccel>0?(o.x=16*T(o.x),o.xAccel=0):(p||o.x+o.w>16*Fe||o.x<0)&&o.xAccel<0&&(o.x=16*T(o.x+o.w),o.xAccel=0)}function O(o,r,e,t,n,a,i){return{map:i,doors:n,paths:a,options:1*o|2*r|4*e,type:t}}function N(o){return{map:o.map.slice(0),doors:o.doors,paths:o.paths,options:o.options,type:o.type}}function j(o,r,e,t,n,a,i,l,m){for(var s=[],d=[],p=Math.max(o,r),c=0;p*p>c;c++)s[c]=0;s=m(s,o,r,p);for(var u,h=[],g=0;10*p>g;g++)for(var y=0;10*p>y;y++){var f=X(Math.floor(y/10),Math.floor(g/10),p),w=Math.floor(y/10)+"-"+Math.floor(g/10);if(y%10===0||g%10===0){var v=null;h[w]||(v=M(0,3),u=N(ue[s[f]]),h[w]=4&u.options?n(u,10,10,v):u),u=h[w]}d[X(y,g,10*p)]=u.map[X(y%10,g%10,10)]}return se=10*r*16,de=10*o*16,{map:d,doors:i,paths:l,width:o,height:r,size:p,tiles:10*p,options:1*e|2*t|4*n,type:a}}function V(o,r,e,t,n,a,i,l,m,s){l.length=0;for(var d=0;d<ue.length;d++)i[d]=d;var p=a[X(e,t-1,n)],c=a[X(e-1,t,n)],u=a[X(e+1,t,n)],h=a[X(e,t+1,n)];if(0>t-1&&(p=-1),0>e-1&&(c=-1),t+1>s-1&&(h=-1),e+1>m-1&&(u=-1),4===p||2===p||6===p||7===p||9===p||13===p){console.warn("Room for Above");for(var g=0;g<i.length;g++)i[g]=-1;i[2]=2,i[3]=3,i[5]=5,i[8]=8,i[9]=9,-1!==c&&(1===c||3===c||4===c||5===c||6===c||9===c||10===c)&&(console.warn("Room for Above and Left"),i[2]=-1,i[5]=-1,i[3]=3,i[8]=8,i[9]=9,-1!==u&&(1===u||3===u||4===u||7===u||8===u||9===u||11===u)&&(i[8]=-1)),-1!==u&&(1===u||3===u||4===u||7===u||8===u||9===u||11===u)&&(console.warn("Room for Above and Left"),i[2]=-1,i[8]=-1,i[3]=3,i[5]=5,i[9]=9,-1!==c&&(1===c||3===c||4===c||5===c||6===c||9===c||10===c)&&(i[5]=-1))}if(0===e&&(console.warn("Left of Map"),i[7]=-1,i[8]=-1,i[1]=-1),e===m-1&&(console.warn("Right of Map"),i[5]=-1,i[6]=-1,i[1]=-1),0===t&&(console.warn("Top of Map"),i[3]=-1,i[5]=-1,i[8]=-1,i[2]=-1),t===s-1&&(console.warn("Bottom of Map"),i[4]=-1,i[6]=-1,i[7]=-1,i[2]=-1),e===o&&t===r){console.warn("Room for Start");for(var g=0;g<i.length;g++)i[g]=-1;i[10]=10,i[11]=11,i[12]=12,i[13]=13,-1===c&&(i[11]=-1),-1===p&&(i[12]=-1),-1===u&&(i[10]=-1),-1===h&&(i[13]=-1)}else i[10]=-1,i[11]=-1,i[12]=-1,i[13]=-1;i[9]=9;for(var g=0;g<i.length;g++)-1!==i[g]&&l.push(i[g]);var y=l[M(0,l.length-1)];11===y&&-1===[1,3,4,5,6,9].indexOf(c)&&V(o,r,e-1,t,n,a,i,l,m,s),12===y&&-1===[2,4,6,7,9].indexOf(p)&&V(o,r,e,t-1,n,a,i,l,m,s),a[X(e,t,n)]=y}function z(o){o.map=j(3*o.mapW,3*o.mapH,0,0,0,0,0,15,function(o,r,e,t){for(var n=(M(0,r-1),M(0,e-1),M(0,3),0),a=0,i=0;t*t>i;i++)o[X(n,a,t)]=9,n++,n>r-1&&(n=0,a++),a>e-1&&(i=t*t);return o})}function O(o,r,e,t,n,a,i){return{map:i,doors:n,paths:a,options:1*o|2*r|4*e,type:t}}function N(o){return{map:o.map.slice(0),doors:o.doors,paths:o.paths,options:o.options,type:o.type}}function j(o,r,e,t,n,a,i,l,m){for(var s=[],d=[],p=Math.max(o,r),c=0;p*p>c;c++)s[c]=0;s=m(s,o,r,p);for(var u,h=[],g=0;10*p>g;g++)for(var y=0;10*p>y;y++){var f=X(Math.floor(y/10),Math.floor(g/10),p),w=Math.floor(y/10)+"-"+Math.floor(g/10);if(y%10===0||g%10===0){var v=null;h[w]||(v=M(0,3),u=N(ue[s[f]]),h[w]=4&u.options?n(u,10,10,v):u),u=h[w]}d[X(y,g,10*p)]=u.map[X(y%10,g%10,10)]}return Ae=10*p,Fe=10*p,se=10*r*16,de=10*o*16,{map:d,doors:i,paths:l,width:o,height:r,size:p,tiles:10*p,options:1*e|2*t|4*n,type:a}}function J(o){o||(me=o.map.tiles),Le=o.map.map}function V(o,r,e,t,n,a,i,l,m,s){l.length=0;for(var d=0;d<ue.length;d++)i[d]=d;var p=a[X(e,t-1,n)],c=a[X(e-1,t,n)],u=a[X(e+1,t,n)],h=a[X(e,t+1,n)];if(0>t-1&&(p=-1),0>e-1&&(c=-1),t+1>s-1&&(h=-1),e+1>m-1&&(u=-1),4===p||2===p||6===p||7===p||9===p||13===p){console.warn("Room for Above");for(var g=0;g<i.length;g++)i[g]=-1;i[2]=2,i[3]=3,i[5]=5,i[8]=8,i[9]=9,-1!==c&&(1===c||3===c||4===c||5===c||6===c||9===c||10===c)&&(console.warn("Room for Above and Left"),i[2]=-1,i[5]=-1,i[3]=3,i[8]=8,i[9]=9,-1!==u&&(1===u||3===u||4===u||7===u||8===u||9===u||11===u)&&(i[8]=-1)),-1!==u&&(1===u||3===u||4===u||7===u||8===u||9===u||11===u)&&(console.warn("Room for Above and Left"),i[2]=-1,i[8]=-1,i[3]=3,i[5]=5,i[9]=9,-1!==c&&(1===c||3===c||4===c||5===c||6===c||9===c||10===c)&&(i[5]=-1))}if(0===e&&(console.warn("Left of Map"),i[7]=-1,i[8]=-1,i[1]=-1),e===m-1&&(console.warn("Right of Map"),i[5]=-1,i[6]=-1,i[1]=-1),0===t&&(console.warn("Top of Map"),i[3]=-1,i[5]=-1,i[8]=-1,i[2]=-1),t===s-1&&(console.warn("Bottom of Map"),i[4]=-1,i[6]=-1,i[7]=-1,i[2]=-1),e===o&&t===r){console.warn("Room for Start");for(var g=0;g<i.length;g++)i[g]=-1;i[10]=10,i[11]=11,i[12]=12,i[13]=13,-1===c&&(i[11]=-1),-1===p&&(i[12]=-1),-1===u&&(i[10]=-1),-1===h&&(i[13]=-1)}else i[10]=-1,i[11]=-1,i[12]=-1,i[13]=-1;i[9]=9;for(var g=0;g<i.length;g++)-1!==i[g]&&l.push(i[g]);var y=l[M(0,l.length-1)];11===y&&-1===[1,3,4,5,6,9].indexOf(c)&&V(o,r,e-1,t,n,a,i,l,m,s),12===y&&-1===[2,4,6,7,9].indexOf(p)&&V(o,r,e,t-1,n,a,i,l,m,s),a[X(e,t,n)]=y}function z(o){o.map=j(3*o.mapW,3*o.mapH,0,0,0,0,0,15,function(o,r,e,t){for(var n=M(0,r-1),a=M(0,e-1),i=(M(0,3),0),l=0,m=[],s=[],d=0;t*t>d;d++)V(n,a,i,l,t,o,m,s,r,e),i++,i>r-1&&(i=0,l++),l>e-1&&(d=t*t);return o})}function O(o,r,e,t,n,a,i){return{map:i,doors:n,paths:a,options:1*o|2*r|4*e,type:t}}function N(o){return{map:o.map.slice(0),doors:o.doors,paths:o.paths,options:o.options,type:o.type}}function j(o,r,e,t,n,a,i,l,m){for(var s=[],d=[],p=Math.max(o,r),c=0;p*p>c;c++)s[c]=0;s=m(s,o,r,p);for(var u,h=[],g=0;10*p>g;g++)for(var y=0;10*p>y;y++){var f=X(Math.floor(y/10),Math.floor(g/10),p),w=Math.floor(y/10)+"-"+Math.floor(g/10);if(y%10===0||g%10===0){var v=null;h[w]||(v=M(0,3),u=N(ue[s[f]]),h[w]=4&u.options?n(u,10,10,v):u),u=h[w]}d[X(y,g,10*p)]=u.map[X(y%10,g%10,10)]}return Ae=10*p,Fe=10*p,se=10*r*16,de=10*o*16,{map:d,doors:i,paths:l,width:o,height:r,size:p,tiles:10*p,options:1*e|2*t|4*n,type:a}}function J(o){0===o.map.length&&z(o),me=o.map.tiles,Le=o.map.map}function V(o,r,e,t,n,a,i,l,m,s){l.length=0;for(var d=0;d<ue.length;d++)i[d]=d;var p=a[X(e,t-1,n)],c=a[X(e-1,t,n)],u=a[X(e+1,t,n)],h=a[X(e,t+1,n)];if(0>t-1&&(p=-1),0>e-1&&(c=-1),t+1>s-1&&(h=-1),e+1>m-1&&(u=-1),4===p||2===p||6===p||7===p||9===p||13===p){console.warn("Room for Above");for(var g=0;g<i.length;g++)i[g]=-1;i[2]=2,i[3]=3,i[5]=5,i[8]=8,i[9]=9,-1!==c&&(1===c||3===c||4===c||5===c||6===c||9===c||10===c)&&(console.warn("Room for Above and Left"),i[2]=-1,i[5]=-1,i[3]=3,i[8]=8,i[9]=9,-1!==u&&(1===u||3===u||4===u||7===u||8===u||9===u||11===u)&&(i[8]=-1)),-1!==u&&(1===u||3===u||4===u||7===u||8===u||9===u||11===u)&&(console.warn("Room for Above and Left"),i[2]=-1,i[8]=-1,i[3]=3,i[5]=5,i[9]=9,-1!==c&&(1===c||3===c||4===c||5===c||6===c||9===c||10===c)&&(i[5]=-1))}if(0===e&&(console.warn("Left of Map"),i[7]=-1,i[8]=-1,i[1]=-1),e===m-1&&(console.warn("Right of Map"),i[5]=-1,i[6]=-1,i[1]=-1),0===t&&(console.warn("Top of Map"),i[3]=-1,i[5]=-1,i[8]=-1,i[2]=-1),t===s-1&&(console.warn("Bottom of Map"),i[4]=-1,i[6]=-1,i[7]=-1,i[2]=-1),e===o&&t===r){console.warn("Room for Start");for(var g=0;g<i.length;g++)i[g]=-1;i[10]=10,i[11]=11,i[12]=12,i[13]=13,-1===c&&(i[11]=-1),-1===p&&(i[12]=-1),-1===u&&(i[10]=-1),-1===h&&(i[13]=-1)}else i[10]=-1,i[11]=-1,i[12]=-1,i[13]=-1;i[9]=9;for(var g=0;g<i.length;g++)-1!==i[g]&&l.push(i[g]);var y=l[M(0,l.length-1)];11===y&&-1===[1,3,4,5,6,9].indexOf(c)&&V(o,r,e-1,t,n,a,i,l,m,s),12===y&&-1===[2,4,6,7,9].indexOf(p)&&V(o,r,e,t-1,n,a,i,l,m,s),a[X(e,t,n)]=y}function z(o){o.map=j(3*o.mapW,3*o.mapH,0,0,0,0,0,15,function(o,r,e,t){for(var n=M(0,r-1),a=M(0,e-1),i=(M(0,3),0),l=0,m=[],s=[],d=0;t*t>d;d++)V(n,a,i,l,t,o,m,s,r,e),i++,i>r-1&&(i=0,l++),l>e-1&&(d=t*t);return o})}function U(o,r,e){J(o);for(var t=0;t<o.doors.length;t++){var n=!1,a=o.doors[t];if(a.dir===r&&(("N"===a.dir||"S"===a.dir)&&(n=e===a.mapX),("E"===a.dir||"W"===a.dir)&&(n=e===a.mapY),n)){var i=3*(a.mapX-ke.mapX),l=3*(a.mapY-ke.mapY);"N"===a.dir&&i++,"E"===a.dir&&(l++,i+=3),"S"===a.dir&&(i++,l+=3),"W"===a.dir&&l++,console.log(qr.x,qr.y),qr.x=10*i*16+80,qr.y=10*l*16+80,console.log(qr.x,qr.y)}}}function q(){for(var o=0;o<ke.doors.length;o++){var r=ke.doors[o],e=3*(r.mapX-ke.mapX),t=3*(r.mapY-ke.mapY),n=T(T(qr.x),10),a=T(T(qr.x+qr.w),10),i=T(T(qr.y),10),l=T(T(qr.y+qr.h),10),m=10*ke.mapW*16*3,s=10*ke.mapH*16*3;"N"===r.dir&&e++,"E"===r.dir&&(t++,e+=3),"S"===r.dir&&(e++,t+=3),"W"===r.dir&&t++,qr.x<0&&"W"===r.dir&&e===n&&t===i&&(console.log("Collision with left door"),U(r.room2,"E",r.mapY)),qr.y<0&&"N"===r.dir&&e===n&&t===i&&(console.log("Collision with top door"),U(r.room2,"S",r.mapX)),qr.x+qr.w>=m&&"E"===r.dir&&e===a&&t===i&&(console.log("Collision with right door"),U(r.room2,"W",r.mapY)),qr.y+qr.h>=s&&"S"===r.dir&&e===n&&t===l&&(console.log("Collision with bottom door"),U(r.room2,"N",r.mapX))}}function J(o){console.log(o),null===o.map&&z(o),ke=o,me=o.map.tiles,Le=o.map.map,Ae=10*o.map.height,Fe=10*o.map.width}function U(){}function q(){for(var o=0;o<ke.doors.length;o++){{var r=ke.doors[o],e=3*(r.mapX-ke.mapX),t=3*(r.mapY-ke.mapY),n=T(T(qr.x),10),a=(T(T(qr.x+qr.w),10),T(T(qr.y),10));T(T(qr.y+qr.h),10)}"N"===r.dir,"E"===r.dir,"S"===r.dir,"W"===r.dir,qr.x<0&&"W"===r.dir&&e===n&&t===a&&console.log("Collision with left door"),qr.x<0&&"W"===r.dir&&console.log(e,n,t),qr.y<0&&"N"===r.dir&&e===n&&t===a&&console.log("Collision with top door"),qr.x>10*ke.mapW*16&&"E"===r.dir&&e===n&&t===a&&console.log("Collision with right door"),qr.y>10*ke.mapH*16&&"S"===r.dir&&e===n&&t===a&&console.log("Collision with bottom door")}}function U(){}function q(){for(var o=0;o<ke.doors.length;o++){{var r=ke.doors[o],e=3*(r.mapX-ke.mapX),t=3*(r.mapY-ke.mapY),n=T(T(qr.x),10),a=(T(T(qr.x+qr.w),10),T(T(qr.y),10));T(T(qr.y+qr.h),10)}"N"===r.dir&&e++,"E"===r.dir&&t++,"S"===r.dir&&e++,"W"===r.dir&&t++,qr.x<0&&"W"===r.dir&&e===n&&t===a&&console.log("Collision with left door"),qr.x>10*ke.mapW*16&&"W"===r.dir&&console.log(e,n,t,a),qr.y<0&&"N"===r.dir&&e===n&&t===a&&console.log("Collision with top door"),qr.x>10*ke.mapW*16&&"E"===r.dir&&e===n&&t===a&&console.log("Collision with right door"),qr.y>10*ke.mapH*16&&"S"===r.dir&&e===n&&t===a&&console.log("Collision with bottom door")}}function U(){}function q(){for(var o=0;o<ke.doors.length;o++){{var r=ke.doors[o],e=3*(r.mapX-ke.mapX),t=3*(r.mapY-ke.mapY),n=T(T(qr.x),10),a=(T(T(qr.x+qr.w),10),T(T(qr.y),10));T(T(qr.y+qr.h),10),10*ke.mapW*16*3}"N"===r.dir&&e++,"E"===r.dir&&t++,"S"===r.dir&&e++,"W"===r.dir&&t++,qr.x<0&&"W"===r.dir&&e===n&&t===a&&console.log("Collision with left door"),qr.x>10*ke.mapW*16&&"E"===r.dir&&console.log(e,n,t,a),qr.y<0&&"N"===r.dir&&e===n&&t===a&&console.log("Collision with top door"),qr.x>10*ke.mapW*16&&"E"===r.dir&&e===n&&t===a&&console.log("Collision with right door"),qr.y>10*ke.mapH*16&&"S"===r.dir&&e===n&&t===a&&console.log("Collision with bottom door")}}function U(){}function q(){for(var o=0;o<ke.doors.length;o++){var r=ke.doors[o],e=3*(r.mapX-ke.mapX),t=3*(r.mapY-ke.mapY),n=T(T(qr.x),10),a=(T(T(qr.x+qr.w),10),T(T(qr.y),10)),i=(T(T(qr.y+qr.h),10),10*ke.mapW*16*3),l=10*ke.mapH*16*3;"N"===r.dir&&e++,"E"===r.dir&&t++,"S"===r.dir&&e++,"W"===r.dir&&t++,qr.x<0&&"W"===r.dir&&e===n&&t===a&&console.log("Collision with left door"),qr.x>=i&&"E"===r.dir&&console.log(e,n,t,a),qr.y<0&&"N"===r.dir&&e===n&&t===a&&console.log("Collision with top door"),qr.x>i&&"E"===r.dir&&e===n&&t===a&&console.log("Collision with right door"),qr.y>l&&"S"===r.dir&&e===n&&t===a&&console.log("Collision with bottom door")}}function U(){}function q(){for(var o=0;o<ke.doors.length;o++){var r=ke.doors[o],e=3*(r.mapX-ke.mapX),t=3*(r.mapY-ke.mapY),n=T(T(qr.x),10),a=T(T(qr.x+qr.w),10),i=T(T(qr.y),10),l=(T(T(qr.y+qr.h),10),10*ke.mapW*16*3),m=10*ke.mapH*16*3;"N"===r.dir&&e++,"E"===r.dir&&(t++,e+=3),"S"===r.dir&&(e++,t+=3),"W"===r.dir&&t++,qr.x<0&&"W"===r.dir&&e===n&&t===i&&console.log("Collision with left door"),qr.x+qr.w>l&&"E"===r.dir&&console.log(e,a,t,i,r.mapX-ke.mapX),qr.y<0&&"N"===r.dir&&e===n&&t===i&&console.log("Collision with top door"),qr.x+qr.w>l&&"E"===r.dir&&e===n&&t===i&&console.log("Collision with right door"),qr.y+qr.h>m&&"S"===r.dir&&e===n&&t===i&&console.log("Collision with bottom door")}}function U(){}function q(){for(var o=0;o<ke.doors.length;o++){{var r=ke.doors[o],e=3*(r.mapX-ke.mapX),t=3*(r.mapY-ke.mapY),n=T(T(qr.x),10),a=T(T(qr.x+qr.w),10),i=T(T(qr.y),10),l=T(T(qr.y+qr.h),10);
10*ke.mapW*16*3,10*ke.mapH*16*3}"N"===r.dir&&e++,"E"===r.dir&&(t++,e+=3),"S"===r.dir&&(e++,t+=3),"W"===r.dir&&t++,qr.x<0&&"W"===r.dir&&e===n&&t===i&&console.log("Collision with left door"),"S"===r.dir&&console.log(i,l,t),l===t&&"S"===r.dir&&console.log(t,l,e,n),qr.y<0&&"N"===r.dir&&e===n&&t===i&&console.log("Collision with top door"),l===t&&"E"===r.dir&&e===a&&t===i&&console.log("Collision with right door"),a===e&&"S"===r.dir&&e===n&&t===l&&console.log("Collision with bottom door")}}function U(){}function q(){for(var o=0;o<ke.doors.length;o++){var r=ke.doors[o],e=3*(r.mapX-ke.mapX),t=3*(r.mapY-ke.mapY),n=T(T(qr.x),10),a=T(T(qr.x+qr.w),10),i=T(T(qr.y),10),l=T(T(qr.y+qr.h),10),m=10*ke.mapW*16*3,s=10*ke.mapH*16*3;"N"===r.dir&&e++,"E"===r.dir&&(t++,e+=3),"S"===r.dir&&(e++,t+=3),"W"===r.dir&&t++,qr.x<0&&"W"===r.dir&&e===n&&t===i&&console.log("Collision with left door"),"S"===r.dir&&console.log(i,l,t),l===t&&"S"===r.dir&&console.log(t,l,e,n),qr.y<0&&"N"===r.dir&&e===n&&t===i&&console.log("Collision with top door"),qr.x+qr.w>=m&&"E"===r.dir&&e===a&&t===i&&console.log("Collision with right door"),qr.y+qr.h>=s&&"S"===r.dir&&e===n&&t===l&&console.log("Collision with bottom door")}}function U(o,r,e){for(var t=0;t<o.doors.length;t++){var n=o.doors[t];n.mapX===r&&n.mapY===e}}function q(){for(var o=0;o<ke.doors.length;o++){var r=ke.doors[o],e=3*(r.mapX-ke.mapX),t=3*(r.mapY-ke.mapY),n=T(T(qr.x),10),a=T(T(qr.x+qr.w),10),i=T(T(qr.y),10),l=T(T(qr.y+qr.h),10),m=10*ke.mapW*16*3,s=10*ke.mapH*16*3;"N"===r.dir&&e++,"E"===r.dir&&(t++,e+=3),"S"===r.dir&&(e++,t+=3),"W"===r.dir&&t++,qr.x<0&&"W"===r.dir&&e===n&&t===i&&(console.log("Collision with left door"),U(r.room2,r.mapX,r.mapY)),qr.y<0&&"N"===r.dir&&e===n&&t===i&&(console.log("Collision with top door"),U(r.room2,r.mapX,r.mapY)),qr.x+qr.w>=m&&"E"===r.dir&&e===a&&t===i&&(console.log("Collision with right door"),U(r.room2,r.mapX,r.mapY)),qr.y+qr.h>=s&&"S"===r.dir&&e===n&&t===l&&(console.log("Collision with bottom door"),U(r.room2,r.mapX,r.mapY))}}function J(o){null===o.map&&z(o),me=o.map.tiles,Le=o.map.map,Ae=10*o.map.height,Fe=10*o.map.width}function U(o,r,e){for(var t=0;t<o.doors.length;t++){var n=o.doors[t];if("N"===n.dir&&(e+=1),"E"===n.dir&&(r+=1),"S"===n.dir&&(e-=1),"W"===n.dir&&(r-=1),console.log(n.mapX,n.mapY,r,e),n.mapX===r&&n.mapY===e){var a=3*(n.mapX-ke.mapX),i=3*(n.mapY-ke.mapY);"N"===n.dir&&a++,"E"===n.dir&&(i++,a+=3),"S"===n.dir&&(a++,i+=3),"W"===n.dir&&i++,J(o),qr.x=10*a*16+80,qr.y=10*i*16+80}}}function q(){for(var o=0;o<ke.doors.length;o++){var r=ke.doors[o],e=3*(r.mapX-ke.mapX),t=3*(r.mapY-ke.mapY),n=T(T(qr.x),10),a=T(T(qr.x+qr.w),10),i=T(T(qr.y),10),l=T(T(qr.y+qr.h),10),m=10*ke.mapW*16*3,s=10*ke.mapH*16*3;"N"===r.dir&&e++,"E"===r.dir&&(t++,e+=3),"S"===r.dir&&(e++,t+=3),"W"===r.dir&&t++,qr.x<0&&"W"===r.dir&&e===n&&t===i&&(console.log("Collision with left door"),U(r.room2,r.mapX,r.mapY)),qr.y<0&&"N"===r.dir&&e===n&&t===i&&(console.log("Collision with top door"),U(r.room2,r.mapX,r.mapY)),qr.x+qr.w>=m&&"E"===r.dir&&e===a&&t===i&&(console.log("Collision with right door"),U(r.room2,r.mapX,r.mapY)),qr.y+qr.h>=s&&"S"===r.dir&&e===n&&t===l&&(console.log("Collision with bottom door"),U(r.room2,r.mapX,r.mapY))}}function J(o){null===o.map&&z(o),me=o.map.tiles,Le=o.map.map,Ae=10*o.map.height,Fe=10*o.map.width}function K(){var o=Dr.canvas,r=o.width/2,e=o.height/2;qr.x-_r+r>o.width?_r=qr.x-(o.width-r):qr.x-r<_r&&(_r=qr.x-r),qr.y-oe+e>o.height?oe=qr.y-(o.height-e):qr.y-e<oe&&(oe=qr.y-e),oe=~~(.5+oe),oe=~~(.5+oe)}function G(){var o=Hr.canvas,r=o.width/2,e=o.height/2,t=16*ke.mapX,n=16*ke.mapY;t-re+r>o.width?re=t-(o.width-r):re>t-r&&(re=t-r),n-ee+e>o.height?ee=n-(o.height-e):ee>n-e&&(ee=n-e),ee=~~(.5+ee),ee=~~(.5+ee)}function Q(o,r,e){De.frontiers.length=0,De.frontiers.push({x:o,y:r}),De.currentRegion=e,De.regions.push(e)}function Z(o){for(var r=!0,e=_(),t=[];r;){var n=0,a=$(e);t.length=0,t.push(sr(a.x-1,a.y),sr(a.x+1,a.y),sr(a.x,a.y-1),sr(a.x,a.y+1));for(var i=0;4>i;i++)null===t[i]&&n++;n>2&&(r=!1)}Q(a.x,a.y,o)}function $(o){var r=M(0,o.length-1);return o[r]}function _(){for(var o=[],r=0;r<De.rooms.length;r++)o=or(o,De.rooms[r]);return o}function or(o,r){for(var e=r.mapX;e<r.mapX+r.mapW;)rr(e,r.mapY-1,1,1)&&o.push({x:e,y:r.mapY-1}),rr(e,r.mapY+r.mapH,1,1)&&o.push({x:e,y:r.mapY+r.mapH}),e++;for(var t=r.mapX;t<r.mapY+r.mapH;)rr(t,r.mapX-1,1,1)&&o.push({x:t,y:r.mapX-1}),rr(t,r.mapX+r.mapW,1,1)&&o.push({x:t,y:r.mapX+r.mapW}),t++;return o}function rr(o,r,e,t){return er(o,r,e,t)&&!tr(o,r,e,t)}function er(o,r,e,t){return o>0&&r>0&&o+e<De.width&&r+t<De.height}function tr(o,r,e,t){for(var n=null,a=0;a<De.rooms.length;){n=De.rooms[a];{if(!(n.mapX>o+e-1||n.mapX+n.mapW-1<o||n.mapY>r+t-1||n.mapY+n.mapH-1<r))return!0;a++}}return!1}function nr(o){for(var r=0,e=null,t=!1,n=100;De.rooms.length>1&&!t;){r=0,r+=ar(o),r+=ir(o),r+=lr(o),r+=mr(o),1===o.region.rooms.length&&r>0&&(t=!0);for(var a=0;a<o.doors.length;a++)e=o.doors[a],wr(e,o).region===o.region&&(t=!0);n--,0===n&&(t=!0)}}function ar(o){for(var r=null,e=null,t=null,n=[],a=o.mapX;a<o.mapX+o.mapW;)e=sr(a,o.mapY-1),null!==e&&n.push({x:a,y:o.mapY,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].room2===r.other&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"N",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x,r.y-1,"S",r.other,o)),i++)}return i}function ir(o){for(var r=null,e=null,t=null,n=[],a=o.mapX;a<o.mapX+o.mapW;)e=sr(a,o.mapY+o.mapH),null!==e&&n.push({x:a,y:o.mapY+o.mapH-1,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].room2===r.other&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"S",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x,r.y+1,"N",r.other,o)),i++)}return i}function lr(o){for(var r=null,e=null,t=null,n=[],a=o.mapY;a<o.mapY+o.mapH;)e=sr(o.mapX-1,a),null!==e&&n.push({x:o.mapX,y:a,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].room2===r.other&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"W",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x-1,r.y,"E",r.other,o)),i++)}return i}function mr(o){for(var r=null,e=null,t=null,n=[],a=o.mapY;a<o.mapY+o.mapH;)e=sr(o.mapX+o.mapW,a),null!==e&&n.push({x:o.mapX+o.mapW-1,y:a,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].room2===r.other&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"E",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x+1,r.y,"W",r.other,o)),i++)}return i}function sr(o,r){for(var e=null,t=0;t<De.rooms.length;){e=De.rooms[t];{if(!(e.mapX>o||e.mapX+e.mapW-1<o||e.mapY>r||e.mapY+e.mapH-1<r))return e;t++}}return null}function dr(o){for(var r=0,e=De.rooms.length;r++<10*o&&De.rooms.length<e+o;)pr()}function pr(){var o=$(De.frontiers);try{cr(hr(o.x,o.y))}catch(r){console.log(De,o,r)}}function cr(o){if(null===o||!rr(o.mapX,o.mapY,o.mapW,o.mapH))return!1;var r=[];r=ur(r,o),De.frontiers=or(r,o),0===De.frontiers.length&&console.log(r,o,or(r,o)),o.mapColor=De.currentRegion.color,De.rooms.push(o),De.currentRegion.rooms.push(o),nr(o)}function or(o,r){for(var e=r.mapX;e<r.mapX+r.mapW;)rr(e,r.mapY-1,1,1)&&o.push({x:e,y:r.mapY-1}),rr(e,r.mapY+r.mapH,1,1)&&o.push({x:e,y:r.mapY+r.mapH}),e++;for(var t=r.mapY;t<r.mapY+r.mapH;)rr(r.mapX-1,t,1,1)&&o.push({x:r.mapX-1,y:t}),rr(r.mapX+r.mapW,t,1,1)&&o.push({x:r.mapX+r.mapW,y:t}),t++;return o}function ur(o,r){for(var e=0;e<De.frontiers.length;e++)De.frontiers[e].x>=r.mapX-1&&De.frontiers[e].x<=r.mapX+r.mapW&&De.frontiers[e].y>=r.mapY&&De.frontiers[e].y<=r.mapY+r.mapH-1||De.frontiers[e].x>=r.mapX&&De.frontiers[e].x<=r.mapX+r.mapW-1&&De.frontiers[e].y>=r.mapY-1&&De.frontiers[e].y<=r.mapY+r.mapH||o.push(De.frontiers[e]);return o}function hr(o,r){for(var e=0,t=1,n=1;e++<25&&(t<De.currentRegion.maxW||n<De.currentRegion.maxH)&&Math.random()<.9;)switch(parseInt(4*Math.random())){case 0:n<De.currentRegion.maxH&&rr(o,r-1,t,n+1)&&(r--,n++);continue;case 1:n<De.currentRegion.maxH&&rr(o,r,t,n+1)&&n++;continue;case 2:t<De.currentRegion.maxW&&rr(o-1,r,t+1,n)&&(o--,t++);continue;case 3:t<De.currentRegion.maxW&&rr(o,r,t+1,n)&&t++;continue;default:continue}return O(o,r,t,n,De.currentRegion)}function O(o,r,e,t,n){return{mapX:o,mapY:r,mapW:e,mapH:t,mapColor:4281545727,region:n,specialType:0,startPositionX:0,startPositionY:0,startRoom:!1,doors:[],map:null}}function gr(o,r,e,t,n){return{mapX:o,mapY:r,doorType:0,dir:e,room1:t,room2:n}}function yr(){for(var o=null,r=null,e=0;e<De.rooms.length;e++){o=De.rooms[e],o.specialType=0;for(var t=0;t<o.doors.length;t++)r=o.doors[t],r.doorType=0}}function fr(){var o=null,r=[],e=null,t=null,n=null,a=null,i=[],l=[],m=[];m.push(De.regions[0]);for(var s=0;m.length>0;){s++,r.length=0,e=m.shift(),l.push(e),n=$(e.rooms),n.specialType=s%Be.length;for(var d=0;d<e.rooms.length;d++){a=e.rooms[d];for(var p=0;p<a.doors.length;p++)o=a.doors[p],t=wr(o,a).region,t!==e&&o.doorType<=0&&(r.indexOf(t)>=0?i.push(o):(o.doorType=s%Be.length,r.push(t),-1===l.indexOf(t)&&-1===m.indexOf(t)&&m.push(t)))}}for(var c=0;c<i.length;c++)o=i[c],o.doorType<=0&&(o.doorType=parseInt(Math.random()*(s%Be.length))+1)}function wr(o,r){return o.room1===r?o.room2:o.room1}function vr(){De={width:0,height:0,rooms:[],frontiers:[],regions:[],currentRegion:0},currentRegionColorIndex=0,De.width=80,De.height=48,Q(40,24,xr()),dr(1),J(De.rooms[0]),ke.startRoom=!0,ke.startPositionX=M(0,ke.mapW-1),ke.startPositionY=M(0,ke.mapH-1),qr.x=10*ke.startPositionX*16+80,qr.y=10*ke.startPositionY*16+80}function xr(){var o=Rr(Be[currentRegionColorIndex],parseInt(3*Math.random())+parseInt(3*Math.random())+1,parseInt(3*Math.random())+parseInt(3*Math.random())+1);return currentRegionColorIndex=(currentRegionColorIndex+1)%Be.length,o}function Rr(o,r,e){return{color:o,maxW:r,maxH:e,rooms:[]}}function Cr(){vr(),m()}function Mr(){pr(),m()}function Tr(){Z(xr())}function Xr(){yr(),fr(),m()}function Q(o,r,e){De.frontiers.length=0,De.frontiers.push({x:o,y:r}),De.currentRegion=e,De.regions.push(e)}function Z(o){var r=$(_());Q(r.x,r.y,o)}function $(o){var r=M(0,o.length-1);return o[r]}function _(){for(var o=[],r=0;r<De.rooms.length;r++)o=or(o,De.rooms[r]);return o}function or(o,r){for(var e=r.mapX;e<r.mapX+r.mapW;)rr(e,r.mapY-1,1,1)&&o.push({x:e,y:r.mapY-1}),rr(e,r.mapY+r.mapH,1,1)&&o.push({x:e,y:r.mapY+r.mapH}),e++;for(var t=r.mapX;t<r.mapY+r.mapH;)rr(t,r.mapX-1,1,1)&&o.push({x:t,y:r.mapX-1}),rr(t,r.mapX+r.mapW,1,1)&&o.push({x:t,y:r.mapX+r.mapW}),t++;return o}function rr(o,r,e,t){return er(o,r,e,t)&&!tr(o,r,e,t)}function er(o,r,e,t){return o>0&&r>0&&o+e<De.width&&r+t<De.height}function tr(o,r,e,t){for(var n=null,a=0;a<De.rooms.length;){n=De.rooms[a];{if(!(n.mapX>o+e-1||n.mapX+n.mapW-1<o||n.mapY>r+t-1||n.mapY+n.mapH-1<r))return!0;a++}}return!1}function nr(o){for(var r=0,e=null,t=!1,n=100;De.rooms.length>1&&!t;){r=0,r+=ar(o),r+=ir(o),r+=lr(o),r+=mr(o),1===o.region.rooms.length&&r>0&&(t=!0);for(var a=0;a<o.doors.length;a++)e=o.doors[a],wr(e,o).region===o.region&&(t=!0);n--,0===n&&(t=!0)}}function ar(o){for(var r=null,e=null,t=null,n=[],a=o.mapX;a<o.mapX+o.mapW;)e=sr(a,o.mapY-1),null!==e&&n.push({x:a,y:o.mapY,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"N",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x,r.y-1,"S",r.other,o)),i++)}return i}function ir(o){for(var r=null,e=null,t=null,n=[],a=o.mapX;a<o.mapX+o.mapW;)e=sr(a,o.mapY+o.mapH),null!==e&&n.push({x:a,y:o.mapY+o.mapH-1,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"S",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x,r.y+1,"N",r.other,o)),i++)}return i}function lr(o){for(var r=null,e=null,t=null,n=[],a=o.mapY;a<o.mapY+o.mapH;)e=sr(o.mapX-1,a),null!==e&&n.push({x:o.mapX,y:a,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"W",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x-1,r.y,"E",r.other,o)),i++)}return i}function mr(o){for(var r=null,e=null,t=null,n=[],a=o.mapY;a<o.mapY+o.mapH;)e=sr(o.mapX+o.mapW,a),null!==e&&n.push({x:o.mapX+o.mapW-1,y:a,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"E",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x+1,r.y,"W",r.other,o)),i++)}return i}function sr(o,r){for(var e=null,t=0;t<De.rooms.length;){e=De.rooms[t];{if(!(e.mapX>o||e.mapX+e.mapW-1<o||e.mapY>r||e.mapY+e.mapH-1<r))return e;t++}}return null}function dr(o){for(var r=0,e=De.rooms.length;r++<10*o&&De.rooms.length<e+o;)pr()}function pr(){var o=$(De.frontiers);try{cr(hr(o.x,o.y))}catch(r){console.log(De,o,r)}}function cr(o){if(null===o||!rr(o.mapX,o.mapY,o.mapW,o.mapH))return!1;var r=[];r=ur(r,o),De.frontiers=or(r,o),0===De.frontiers.length&&console.log(r,o,or(r,o)),o.mapColor=De.currentRegion.color,De.rooms.push(o),De.currentRegion.rooms.push(o),nr(o)}function or(o,r){for(var e=r.mapX;e<r.mapX+r.mapW;)rr(e,r.mapY-1,1,1)&&o.push({x:e,y:r.mapY-1}),rr(e,r.mapY+r.mapH,1,1)&&o.push({x:e,y:r.mapY+r.mapH}),e++;for(var t=r.mapY;t<r.mapY+r.mapH;)rr(r.mapX-1,t,1,1)&&o.push({x:r.mapX-1,y:t}),rr(r.mapX+r.mapW,t,1,1)&&o.push({x:r.mapX+r.mapW,y:t}),t++;return o}function ur(o,r){for(var e=0;e<De.frontiers.length;e++)De.frontiers[e].x>=r.mapX-1&&De.frontiers[e].x<=r.mapX+r.mapW&&De.frontiers[e].y>=r.mapY&&De.frontiers[e].y<=r.mapY+r.mapH-1||De.frontiers[e].x>=r.mapX&&De.frontiers[e].x<=r.mapX+r.mapW-1&&De.frontiers[e].y>=r.mapY-1&&De.frontiers[e].y<=r.mapY+r.mapH||o.push(De.frontiers[e]);return o}function hr(o,r){for(var e=0,t=1,n=1;e++<25&&(t<De.currentRegion.maxW||n<De.currentRegion.maxH)&&Math.random()<.9;)switch(parseInt(4*Math.random())){case 0:n<De.currentRegion.maxH&&rr(o,r-1,t,n+1)&&(r--,n++);continue;case 1:n<De.currentRegion.maxH&&rr(o,r,t,n+1)&&n++;continue;case 2:t<De.currentRegion.maxW&&rr(o-1,r,t+1,n)&&(o--,t++);continue;case 3:t<De.currentRegion.maxW&&rr(o,r,t+1,n)&&t++;continue;default:continue}return O(o,r,t,n,De.currentRegion)}function O(o,r,e,t,n){return{mapX:o,mapY:r,mapW:e,mapH:t,mapColor:4281545727,region:n,specialType:0,doors:[]}}function gr(o,r,e,t,n){return{mapX:o,mapY:r,doorType:0,dir:e,room1:t,room2:n}}function yr(){for(var o=null,r=null,e=0;e<De.rooms.length;e++){o=De.rooms[e],o.specialType=0;for(var t=0;t<o.doors.length;t++)r=o.doors[t],r.doorType=0}}function fr(){var o=null,r=[],e=null,t=null,n=null,a=null,i=[],l=[],m=[];m.push(De.regions[0]);for(var s=0;m.length>0;){s++,r.length=0,e=m.shift(),l.push(e),n=$(e.rooms),n.specialType=s%Be.length;for(var d=0;d<e.rooms.length;d++){a=e.rooms[d];for(var p=0;p<a.doors.length;p++)o=a.doors[p],t=wr(o,a).region,t!==e&&o.doorType<=0&&(r.indexOf(t)>=0?i.push(o):(o.doorType=s%Be.length,r.push(t),-1===l.indexOf(t)&&-1===m.indexOf(t)&&m.push(t)))}}for(var c=0;c<i.length;c++)o=i[c],o.doorType<=0&&(o.doorType=parseInt(Math.random()*(s%Be.length))+1)}function wr(o,r){return o.room1===r?o.room2:o.room1}function vr(){De={width:0,height:0,rooms:[],frontiers:[],regions:[],currentRegion:0},currentRegionColorIndex=0,De.width=80,De.height=48,Q(40,24,xr()),dr(2)}function xr(){var o=Rr(Be[currentRegionColorIndex],parseInt(3*Math.random())+parseInt(3*Math.random())+1,parseInt(3*Math.random())+parseInt(3*Math.random())+1);return currentRegionColorIndex=(currentRegionColorIndex+1)%Be.length,o}function Rr(o,r,e){return{color:o,maxW:r,maxH:e,rooms:[]}}function Cr(){vr(),m()}function Mr(){pr(),m()}function Tr(){Z(xr())}function Xr(){yr(),fr(),m()}function Q(o,r,e){De.frontiers.length=0,De.frontiers.push({x:o,y:r}),De.currentRegion=e,De.regions.push(e)}function Z(o){var r=$(_());Q(r.x,r.y,o)}function $(o){var r=M(0,o.length-1);return o[r]}function _(){for(var o=[],r=0;r<De.rooms.length;r++)o=or(o,De.rooms[r]);return o}function or(o,r){for(var e=r.mapX;e<r.mapX+r.mapW;)rr(e,r.mapY-1,1,1)&&o.push({x:e,y:r.mapY-1}),rr(e,r.mapY+r.mapH,1,1)&&o.push({x:e,y:r.mapY+r.mapH}),e++;for(var t=r.mapX;t<r.mapY+r.mapH;)rr(t,r.mapX-1,1,1)&&o.push({x:t,y:r.mapX-1}),rr(t,r.mapX+r.mapW,1,1)&&o.push({x:t,y:r.mapX+r.mapW}),t++;return o}function rr(o,r,e,t){return er(o,r,e,t)&&!tr(o,r,e,t)}function er(o,r,e,t){return o>0&&r>0&&o+e<De.width&&r+t<De.height}function tr(o,r,e,t){for(var n=null,a=0;a<De.rooms.length;){n=De.rooms[a];{if(!(n.mapX>o+e-1||n.mapX+n.mapW-1<o||n.mapY>r+t-1||n.mapY+n.mapH-1<r))return!0;a++}}return!1}function nr(o){for(var r=0,e=null,t=!1,n=100;De.rooms.length>1&&!t;){r=0,r+=ar(o),r+=ir(o),r+=lr(o),r+=mr(o),1===o.region.rooms.length&&r>0&&(t=!0);for(var a=0;a<o.doors.length;a++)e=o.doors[a],wr(e,o).region===o.region&&(t=!0);n--,0===n&&(t=!0)}}function ar(o){for(var r=null,e=null,t=null,n=[],a=o.mapX;a<o.mapX+o.mapW;)e=sr(a,o.mapY-1),null!==e&&n.push({x:a,y:o.mapY,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"N",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x,r.y-1,"S",r.other,o)),i++)}return i}function ir(o){for(var r=null,e=null,t=null,n=[],a=o.mapX;a<o.mapX+o.mapW;)e=sr(a,o.mapY+o.mapH),null!==e&&n.push({x:a,y:o.mapY+o.mapH-1,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"S",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x,r.y+1,"N",r.other,o)),i++)}return i}function lr(o){for(var r=null,e=null,t=null,n=[],a=o.mapY;a<o.mapY+o.mapH;)e=sr(o.mapX-1,a),null!==e&&n.push({x:o.mapX,y:a,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"W",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x-1,r.y,"E",r.other,o)),i++)}return i}function mr(o){for(var r=null,e=null,t=null,n=[],a=o.mapY;a<o.mapY+o.mapH;)e=sr(o.mapX+o.mapW,a),null!==e&&n.push({x:o.mapX+o.mapW-1,y:a,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"E",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x+1,r.y,"W",r.other,o)),i++)}return i}function sr(o,r){for(var e=null,t=0;t<De.rooms.length;){e=De.rooms[t];{if(!(e.mapX>o||e.mapX+e.mapW-1<o||e.mapY>r||e.mapY+e.mapH-1<r))return e;t++}}return null}function dr(o){for(var r=0,e=De.rooms.length;r++<10*o&&De.rooms.length<e+o;)pr()}function pr(){var o=$(De.frontiers);try{cr(hr(o.x,o.y))}catch(r){console.log(De,o,r)}}function cr(o){if(null===o||!rr(o.mapX,o.mapY,o.mapW,o.mapH))return!1;var r=[];r=ur(r,o),De.frontiers=or(r,o),0===De.frontiers.length&&console.log(r,o,or(r,o)),o.mapColor=De.currentRegion.color,De.rooms.push(o),De.currentRegion.rooms.push(o),nr(o)}function or(o,r){for(var e=r.mapX;e<r.mapX+r.mapW;)rr(e,r.mapY-1,1,1)&&o.push({x:e,y:r.mapY-1}),rr(e,r.mapY+r.mapH,1,1)&&o.push({x:e,y:r.mapY+r.mapH}),e++;for(var t=r.mapY;t<r.mapY+r.mapH;)rr(r.mapX-1,t,1,1)&&o.push({x:r.mapX-1,y:t}),rr(r.mapX+r.mapW,t,1,1)&&o.push({x:r.mapX+r.mapW,y:t}),t++;return o}function ur(o,r){for(var e=0;e<De.frontiers.length;e++)De.frontiers[e].x>=r.mapX-1&&De.frontiers[e].x<=r.mapX+r.mapW&&De.frontiers[e].y>=r.mapY&&De.frontiers[e].y<=r.mapY+r.mapH-1||De.frontiers[e].x>=r.mapX&&De.frontiers[e].x<=r.mapX+r.mapW-1&&De.frontiers[e].y>=r.mapY-1&&De.frontiers[e].y<=r.mapY+r.mapH||o.push(De.frontiers[e]);return o}function hr(o,r){for(var e=0,t=1,n=1;e++<25&&(t<De.currentRegion.maxW||n<De.currentRegion.maxH)&&Math.random()<.9;)switch(parseInt(4*Math.random())){case 0:n<De.currentRegion.maxH&&rr(o,r-1,t,n+1)&&(r--,n++);continue;case 1:n<De.currentRegion.maxH&&rr(o,r,t,n+1)&&n++;continue;case 2:t<De.currentRegion.maxW&&rr(o-1,r,t+1,n)&&(o--,t++);continue;case 3:t<De.currentRegion.maxW&&rr(o,r,t+1,n)&&t++;continue;default:continue}return O(o,r,t,n,De.currentRegion)}function O(o,r,e,t,n){return{mapX:o,mapY:r,mapW:e,mapH:t,mapColor:4281545727,region:n,specialType:0,doors:[]}}function gr(o,r,e,t,n){return{mapX:o,mapY:r,doorType:0,dir:e,room1:t,room2:n}}function yr(){for(var o=null,r=null,e=0;e<De.rooms.length;e++){o=De.rooms[e],o.specialType=0;for(var t=0;t<o.doors.length;t++)r=o.doors[t],r.doorType=0}}function fr(){var o=null,r=[],e=null,t=null,n=null,a=null,i=[],l=[],m=[];m.push(De.regions[0]);for(var s=0;m.length>0;){s++,r.length=0,e=m.shift(),l.push(e),n=$(e.rooms),n.specialType=s%Be.length;for(var d=0;d<e.rooms.length;d++){a=e.rooms[d];for(var p=0;p<a.doors.length;p++)o=a.doors[p],t=wr(o,a).region,t!==e&&o.doorType<=0&&(r.indexOf(t)>=0?i.push(o):(o.doorType=s%Be.length,r.push(t),-1===l.indexOf(t)&&-1===m.indexOf(t)&&m.push(t)))}}for(var c=0;c<i.length;c++)o=i[c],o.doorType<=0&&(o.doorType=parseInt(Math.random()*(s%Be.length))+1)}function wr(o,r){return o.room1===r?o.room2:o.room1}function vr(){De={width:0,height:0,rooms:[],frontiers:[],regions:[],currentRegion:0},currentRegionColorIndex=0,De.width=80,De.height=48,Q(40,24,xr()),dr(2)}function xr(){var o=Rr(Be[currentRegionColorIndex],parseInt(3*Math.random())+parseInt(3*Math.random())+1,parseInt(3*Math.random())+parseInt(3*Math.random())+1);return currentRegionColorIndex=(currentRegionColorIndex+1)%Be.length,o}function Rr(o,r,e){return{color:o,maxW:r,maxH:e,rooms:[]}}function Cr(){vr(),m()}function Mr(){pr(),m()}function Tr(){Z(xr())}function Xr(){yr(),fr(),m()}function Q(o,r,e){De.frontiers.length=0,De.frontiers.push({x:o,y:r}),De.currentRegion=e,De.regions.push(e)}function Z(o){for(var r,e=!0,t=_(),n=[];e;){var a=0;r=$(t),n.length=0,n.push(sr(r.x-1,r.y),sr(r.x+1,r.y),sr(r.x,r.y-1),sr(r.x,r.y+1));for(var i=0;4>i;i++)null===n[i]&&a++;a>2&&(e=!1)}Q(r.x,r.y,o)}function $(o){var r=M(0,o.length-1);return o[r]}function _(){for(var o=[],r=0;r<De.rooms.length;r++)o=or(o,De.rooms[r]);return o}function or(o,r){for(var e=r.mapX;e<r.mapX+r.mapW;)rr(e,r.mapY-1,1,1)&&o.push({x:e,y:r.mapY-1}),rr(e,r.mapY+r.mapH,1,1)&&o.push({x:e,y:r.mapY+r.mapH}),e++;for(var t=r.mapX;t<r.mapY+r.mapH;)rr(t,r.mapX-1,1,1)&&o.push({x:t,y:r.mapX-1}),rr(t,r.mapX+r.mapW,1,1)&&o.push({x:t,y:r.mapX+r.mapW}),t++;return o}function rr(o,r,e,t){return er(o,r,e,t)&&!tr(o,r,e,t)}function er(o,r,e,t){return o>0&&r>0&&o+e<De.width&&r+t<De.height}function tr(o,r,e,t){for(var n=null,a=0;a<De.rooms.length;){n=De.rooms[a];{if(!(n.mapX>o+e-1||n.mapX+n.mapW-1<o||n.mapY>r+t-1||n.mapY+n.mapH-1<r))return!0;a++}}return!1}function nr(o){for(var r=0,e=null,t=!1,n=100;De.rooms.length>1&&!t;){r=0,r+=ar(o),r+=ir(o),r+=lr(o),r+=mr(o),1===o.region.rooms.length&&r>0&&(t=!0);for(var a=0;a<o.doors.length;a++)e=o.doors[a],wr(e,o).region===o.region&&(t=!0);n--,0===n&&(t=!0)}}function ar(o){for(var r=null,e=null,t=null,n=[],a=o.mapX;a<o.mapX+o.mapW;)e=sr(a,o.mapY-1),null!==e&&n.push({x:a,y:o.mapY,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"N",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x,r.y-1,"S",r.other,o)),i++)}return i}function ir(o){for(var r=null,e=null,t=null,n=[],a=o.mapX;a<o.mapX+o.mapW;)e=sr(a,o.mapY+o.mapH),null!==e&&n.push({x:a,y:o.mapY+o.mapH-1,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"S",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x,r.y+1,"N",r.other,o)),i++)}return i}function lr(o){for(var r=null,e=null,t=null,n=[],a=o.mapY;a<o.mapY+o.mapH;)e=sr(o.mapX-1,a),null!==e&&n.push({x:o.mapX,y:a,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"W",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x-1,r.y,"E",r.other,o)),i++)}return i}function mr(o){for(var r=null,e=null,t=null,n=[],a=o.mapY;a<o.mapY+o.mapH;)e=sr(o.mapX+o.mapW,a),null!==e&&n.push({x:o.mapX+o.mapW-1,y:a,other:e}),a++;for(var i=0,l=0;l<n.length;l++){r=n[l];for(var m=!1,s=0;s<o.doors.length;s++)o.doors[s].x===r.x&&o.doors[s].y===r.y&&(m=!0);Math.random()>He||W(o.doors,r)>=0||m||(t=gr(r.x,r.y,"E",o,r.other),o.doors.push(t),r.other.doors.push(gr(r.x+1,r.y,"W",r.other,o)),i++)}return i}function sr(o,r){for(var e=null,t=0;t<De.rooms.length;){e=De.rooms[t];{if(!(e.mapX>o||e.mapX+e.mapW-1<o||e.mapY>r||e.mapY+e.mapH-1<r))return e;t++}}return null}function dr(o){for(var r=0,e=De.rooms.length;r++<10*o&&De.rooms.length<e+o;)pr()}function pr(){if(De.frontiers.length>0){var o=$(De.frontiers);try{cr(hr(o.x,o.y))}catch(r){console.log(De,o,r)}}}function cr(o){if(null===o||!rr(o.mapX,o.mapY,o.mapW,o.mapH))return!1;var r=[];r=ur(r,o),De.frontiers=or(r,o),0===De.frontiers.length&&console.log(r,o,or(r,o)),o.mapColor=De.currentRegion.color,De.rooms.push(o),De.currentRegion.rooms.push(o),nr(o)}function or(o,r){for(var e=r.mapX;e<r.mapX+r.mapW;)rr(e,r.mapY-1,1,1)&&o.push({x:e,y:r.mapY-1}),rr(e,r.mapY+r.mapH,1,1)&&o.push({x:e,y:r.mapY+r.mapH}),e++;for(var t=r.mapY;t<r.mapY+r.mapH;)rr(r.mapX-1,t,1,1)&&o.push({x:r.mapX-1,y:t}),rr(r.mapX+r.mapW,t,1,1)&&o.push({x:r.mapX+r.mapW,y:t}),t++;return o}function ur(o,r){for(var e=0;e<De.frontiers.length;e++)De.frontiers[e].x>=r.mapX-1&&De.frontiers[e].x<=r.mapX+r.mapW&&De.frontiers[e].y>=r.mapY&&De.frontiers[e].y<=r.mapY+r.mapH-1||De.frontiers[e].x>=r.mapX&&De.frontiers[e].x<=r.mapX+r.mapW-1&&De.frontiers[e].y>=r.mapY-1&&De.frontiers[e].y<=r.mapY+r.mapH||o.push(De.frontiers[e]);return o}function hr(o,r){for(var e=0,t=1,n=1;e++<25&&(t<De.currentRegion.maxW||n<De.currentRegion.maxH)&&Math.random()<.9;)switch(parseInt(4*Math.random())){case 0:n<De.currentRegion.maxH&&rr(o,r-1,t,n+1)&&(r--,n++);continue;case 1:n<De.currentRegion.maxH&&rr(o,r,t,n+1)&&n++;continue;case 2:t<De.currentRegion.maxW&&rr(o-1,r,t+1,n)&&(o--,t++);continue;case 3:t<De.currentRegion.maxW&&rr(o,r,t+1,n)&&t++;continue;default:continue}return O(o,r,t,n,De.currentRegion)}function O(o,r,e,t,n){return{mapX:o,mapY:r,mapW:e,mapH:t,mapColor:4281545727,region:n,specialType:0,doors:[]}}function gr(o,r,e,t,n){return{mapX:o,mapY:r,doorType:0,dir:e,room1:t,room2:n}}function yr(){for(var o=null,r=null,e=0;e<De.rooms.length;e++){o=De.rooms[e],o.specialType=0;for(var t=0;t<o.doors.length;t++)r=o.doors[t],r.doorType=0}}function fr(){var o=null,r=[],e=null,t=null,n=null,a=null,i=[],l=[],m=[];m.push(De.regions[0]);for(var s=0;m.length>0;){s++,r.length=0,e=m.shift(),l.push(e),n=$(e.rooms),n.specialType=s%Be.length;for(var d=0;d<e.rooms.length;d++){a=e.rooms[d];for(var p=0;p<a.doors.length;p++)o=a.doors[p],t=wr(o,a).region,t!==e&&o.doorType<=0&&(r.indexOf(t)>=0?i.push(o):(o.doorType=s%Be.length,r.push(t),-1===l.indexOf(t)&&-1===m.indexOf(t)&&m.push(t)))}}for(var c=0;c<i.length;c++)o=i[c],o.doorType<=0&&(o.doorType=parseInt(Math.random()*(s%Be.length))+1)}function wr(o,r){return o.room1===r?o.room2:o.room1}function vr(){De={width:0,height:0,rooms:[],frontiers:[],regions:[],currentRegion:0},currentRegionColorIndex=0,De.width=80,De.height=48,Q(40,24,xr()),dr(2)}function xr(){var o=Rr(Be[currentRegionColorIndex],parseInt(3*Math.random())+parseInt(3*Math.random())+1,parseInt(3*Math.random())+parseInt(3*Math.random())+1);return currentRegionColorIndex=(currentRegionColorIndex+1)%Be.length,o}function Rr(o,r,e){return{color:o,maxW:r,maxH:e,rooms:[]}}function Cr(){vr(),m()}function Mr(){pr(),m()}function Tr(){Z(xr())}function Xr(){yr(),fr(),m()}var Wr={player:{},border:{},tile:{}},Yr=0,Pr=[],Wr={player:{},border:{},tile:{}},Yr=0,Pr=[],Wr={player:{},border:{},tile:{}},Yr=0,Pr=[],br,Fr,Ar,Lr,Dr,kr,Hr,Sr,Br=["getElementById","querySelector","querySelectorAll"],Er=0,Ir=1,Or=2,Nr=!0,jr=new CustomEvent("frame"),Vr=window.performance.now(),zr=window.performance.now(),Jr={},Ur={},qr={x:151,y:48,w:16,h:32,img:null,xDirection:0,yDirection:1,xAccel:0,yAccel:0,maxAccel:5,jumpForce:7,jumpHeight:50,jumpStart:0,jumping:0,jumpsUsed:0,maxJumps:1,angle:0,health:5,maxHealth:5},Kr=Vr-zr,Gr=[qr],Qr={a:65,w:87,s:83,d:68,space:32,shift:16,ctrl:17,alt:18,tab:9,debug:192};g("keydown",P),g("keyup",b),g("resize",x),g("DOMContentLoaded",v),g("frame",R),window.addEventListener("resize",f),document.addEventListener("DOMContentLoaded",f),document.addEventListener("mousedown",f),document.addEventListener("mouseup",f),document.addEventListener("keydown",f),document.addEventListener("keyup",f),document.addEventListener("frame",f);var br,Fr,Ar,Lr,Dr,kr,Hr,Sr,Br=["getElementById","querySelector","querySelectorAll"],Er=0,Ir=1,Or=2,Nr=!0,jr=new CustomEvent("frame"),Vr=window.performance.now(),zr=window.performance.now(),Jr={},Ur={},qr={x:151,y:48,w:16,h:32,img:null,xDirection:0,yDirection:1,xAccel:0,yAccel:0,maxAccel:5,jumpForce:7,jumpHeight:50,jumpStart:0,jumping:0,jumpsUsed:0,maxJumps:1,angle:0,health:5,maxHealth:5},Kr=Vr-zr,Gr=[qr],Qr={a:65,w:87,s:83,d:68,space:32,shift:16,ctrl:17,alt:18,tab:9,debug:192};g("keydown",P),g("keyup",b),g("resize",x),g("DOMContentLoaded",v),g("frame",R),window.addEventListener("resize",f),document.addEventListener("DOMContentLoaded",f),document.addEventListener("mousedown",f),document.addEventListener("mouseup",f),document.addEventListener("keydown",f),document.addEventListener("keyup",f),document.addEventListener("frame",f);var br,Fr,Ar,Lr,Dr,kr,Hr,Sr,Br=["getElementById","querySelector","querySelectorAll"],Er=0,Ir=1,Or=2,Nr=!0,jr=new CustomEvent("frame"),Vr=window.performance.now(),zr=window.performance.now(),Jr={},Ur={},qr={x:151,y:48,w:16,h:32,img:null,xDirection:0,yDirection:1,xAccel:0,yAccel:0,maxAccel:5,jumpForce:7,jumpHeight:50,jumpStart:0,jumping:0,jumpsUsed:0,maxJumps:1,angle:0,health:5,maxHealth:5},Kr=Vr-zr,Gr=[qr],Qr={a:65,w:87,s:83,d:68,space:32,shift:16,ctrl:17,alt:18,tab:9,debug:192};g("keydown",P),g("keyup",b),g("resize",x),g("DOMContentLoaded",v),g("frame",R),window.addEventListener("resize",f),document.addEventListener("DOMContentLoaded",f),document.addEventListener("mousedown",f),document.addEventListener("mouseup",f),document.addEventListener("keydown",f),document.addEventListener("keyup",f),document.addEventListener("frame",f);for(var Zr=[],$r=30,_r=0,oe=0,re=0,ee=0,te=[],ne={},ae=[0,1],ie=[],le={w:16,h:16,img:null,angle:0},me=0,se=0,de=0,pe=me,ce=me,ue=[],he=[],ge=[],ye=0;100>ye;ye++)ge[ye]=0;var fe=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],we=[1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1],ve=[1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],xe=[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1],Re=[1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Ce=[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1],Me=[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,0,0,1,1,1,0,1,1,0,0,0,0,1,1,1,0,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1],Te=[1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Xe=[1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1],We=[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,2,2,0,0,0,0,0,0,0,1,2,2,0,0,0,0,0,0,0,1,2,2,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],Ye=[1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,2,2,1,1,0,0,0,0,0,0,2,2,1,1,0,0,0,0,0,0,2,2,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Pe=[1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,1,1,1,1,1,1,2,2,2,2,1,1,1],be=[1,1,1,2,2,2,2,1,1,1,1,1,1,2,2,2,2,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1];
ue.push(O(0,0,0,0,0,15,ge)),ue.push(O(0,0,0,1,0,5,fe)),ue.push(O(0,0,0,2,0,10,we)),ue.push(O(0,0,0,3,0,11,ve)),ue.push(O(0,0,0,4,0,13,xe)),ue.push(O(0,0,0,5,0,6,Re)),ue.push(O(0,0,0,6,0,12,Ce)),ue.push(O(0,0,0,7,0,9,Me)),ue.push(O(0,0,0,8,0,3,Te)),ue.push(O(0,0,0,9,0,15,Xe)),ue.push(O(0,0,0,10,1,14,We)),ue.push(O(0,0,0,11,4,11,Ye)),ue.push(O(0,0,0,12,8,7,Pe)),ue.push(O(0,0,0,13,2,13,be)),he.push(j(4,1,0,0,0,0,0,15,function(o,r,e,t){for(var n=M(0,r-1),a=M(0,e-1),i=(M(0,3),0),l=0,m=[],s=[],d=0;t*t>d;d++)V(n,a,i,l,t,o,m,s,r,e),i++,i>r-1&&(i=0,l++),l>e-1&&(d=t*t);return o}));for(var me=0,Fe=0,Ae=0,se=0,de=0,pe=me,ce=me,ue=[],he=[],ge=[],ye=0;100>ye;ye++)ge[ye]=0;var Le=null,fe=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],we=[1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1],ve=[1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],xe=[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1],Re=[1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Ce=[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1],Me=[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,0,0,1,1,1,0,1,1,0,0,0,0,1,1,1,0,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1],Te=[1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Xe=[1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1],We=[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,2,2,0,0,0,0,0,0,0,1,2,2,0,0,0,0,0,0,0,1,2,2,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],Ye=[1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,2,2,1,1,0,0,0,0,0,0,2,2,1,1,0,0,0,0,0,0,2,2,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Pe=[1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,1,1,1,1,1,1,2,2,2,2,1,1,1],be=[1,1,1,2,2,2,2,1,1,1,1,1,1,2,2,2,2,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1];ue.push(O(0,0,0,0,0,15,ge)),ue.push(O(0,0,0,1,0,5,fe)),ue.push(O(0,0,0,2,0,10,we)),ue.push(O(0,0,0,3,0,11,ve)),ue.push(O(0,0,0,4,0,13,xe)),ue.push(O(0,0,0,5,0,6,Re)),ue.push(O(0,0,0,6,0,12,Ce)),ue.push(O(0,0,0,7,0,9,Me)),ue.push(O(0,0,0,8,0,3,Te)),ue.push(O(0,0,0,9,0,15,Xe)),ue.push(O(0,0,0,10,1,14,We)),ue.push(O(0,0,0,11,4,11,Ye)),ue.push(O(0,0,0,12,8,7,Pe)),ue.push(O(0,0,0,13,2,13,be)),he.push(j(4,1,0,0,0,0,0,15,function(o,r,e,t){for(var n=M(0,r-1),a=M(0,e-1),i=(M(0,3),0),l=0,m=[],s=[],d=0;t*t>d;d++)V(n,a,i,l,t,o,m,s,r,e),i++,i>r-1&&(i=0,l++),l>e-1&&(d=t*t);return o}));for(var me=0,Fe=0,Ae=0,se=0,de=0,pe=me,ce=me,ue=[],he=[],ge=[],ye=0;100>ye;ye++)ge[ye]=0;var Le=null,fe=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],we=[1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1],ve=[1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],xe=[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1],Re=[1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Ce=[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1],Me=[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,0,0,1,1,1,0,1,1,0,0,0,0,1,1,1,0,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1],Te=[1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Xe=[1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1],We=[1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,2,2,0,0,0,0,0,0,0,1,2,2,0,0,0,0,0,0,0,1,2,2,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],Ye=[1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,2,2,1,1,0,0,0,0,0,0,2,2,1,1,0,0,0,0,0,0,2,2,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],Pe=[1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,1,1,1,1,1,1,2,2,2,2,1,1,1],be=[1,1,1,2,2,2,2,1,1,1,1,1,1,2,2,2,2,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1];ue.push(O(0,0,0,0,0,15,ge)),ue.push(O(0,0,0,1,0,5,fe)),ue.push(O(0,0,0,2,0,10,we)),ue.push(O(0,0,0,3,0,11,ve)),ue.push(O(0,0,0,4,0,13,xe)),ue.push(O(0,0,0,5,0,6,Re)),ue.push(O(0,0,0,6,0,12,Ce)),ue.push(O(0,0,0,7,0,9,Me)),ue.push(O(0,0,0,8,0,3,Te)),ue.push(O(0,0,0,9,0,15,Xe)),ue.push(O(0,0,0,10,1,14,We)),ue.push(O(0,0,0,11,4,11,Ye)),ue.push(O(0,0,0,12,8,7,Pe)),ue.push(O(0,0,0,13,2,13,be)),he.push(j(4,1,0,0,0,0,0,15,function(o,r,e,t){for(var n=M(0,r-1),a=M(0,e-1),i=(M(0,3),0),l=0,m=[],s=[],d=0;t*t>d;d++)V(n,a,i,l,t,o,m,s,r,e),i++,i>r-1&&(i=0,l++),l>e-1&&(d=t*t);return o}));var Le=null,Fe=0,Ae=0,Le=null,Le=null,Fe=0,Ae=0,De,ke,He=.2,Se=0,Be=[{background:"#BBBBBB",border:"#A0A0A0",other:"#CFCFCF",lock:"#FFFFFF"},{background:"#990000",border:"#FF0000",other:"#FF0000",lock:"#FF6666"},{background:"#009900",border:"#00BB00",other:"#00BB00",lock:"#66FF66"},{background:"#000099",border:"#0000FF",other:"#0000FF",lock:"#6666FF"},{background:"#9F9F9F",border:"#555555",other:"#555555",lock:"#B0B0B0"}],De,He=.2,Se=0,Be=[{background:"#BBBBBB",border:"#A0A0A0",other:"#CFCFCF",lock:"#FFFFFF"},{background:"#990000",border:"#FF0000",other:"#FF0000",lock:"#FF6666"},{background:"#009900",border:"#00BB00",other:"#00BB00",lock:"#66FF66"},{background:"#000099",border:"#0000FF",other:"#0000FF",lock:"#6666FF"},{background:"#9F9F9F",border:"#555555",other:"#555555",lock:"#B0B0B0"}],De,ke,He=.2,Se=0,Be=[{background:"#BBBBBB",border:"#A0A0A0",other:"#CFCFCF",lock:"#FFFFFF"},{background:"#990000",border:"#FF0000",other:"#FF0000",lock:"#FF6666"},{background:"#009900",border:"#00BB00",other:"#00BB00",lock:"#66FF66"},{background:"#000099",border:"#0000FF",other:"#0000FF",lock:"#6666FF"},{background:"#9F9F9F",border:"#555555",other:"#555555",lock:"#B0B0B0"}],De,ke,He=.2,Se=0,Be=[{background:"#BBBBBB",border:"#A0A0A0",other:"#CFCFCF",lock:"#FFFFFF"},{background:"#990000",border:"#FF0000",other:"#FF0000",lock:"#FF6666"},{background:"#009900",border:"#00BB00",other:"#00BB00",lock:"#66FF66"},{background:"#000099",border:"#0000FF",other:"#0000FF",lock:"#6666FF"},{background:"#9F9F9F",border:"#555555",other:"#555555",lock:"#B0B0B0"}];